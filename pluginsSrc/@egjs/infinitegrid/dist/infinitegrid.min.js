!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).InfiniteGrid=t()}(this,(function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function r(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(s=(o<3?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function o(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(arguments[t]));return e}function a(e){return void 0===e}var u=function(){function e(e,t){var n,i;if(this._canceled=!1,t)try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),o=r.next();!o.done;o=r.next()){var s=o.value;this[s]=t[s]}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.eventType=e}var t=e.prototype;return t.stop=function(){this._canceled=!0},t.isCanceled=function(){return this._canceled},e}(),c=function(){function e(){this._eventHandler={}}var t=e.prototype;return t.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e instanceof u?e.eventType:e;return(i=s(this._eventHandler[i]||[])).length<=0||(e instanceof u?(e.currentTarget=this,i.forEach((function(t){t(e)}))):i.forEach((function(e){e.apply(void 0,s(t))}))),this},t.once=function(e,t){var n,i=this;if("object"==typeof e&&a(t)){var r,o=e;for(r in o)this.once(r,o[r])}else"string"==typeof e&&"function"==typeof t&&(n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t.apply(void 0,s(r)),i.off(e,n)},this.on(e,n));return this},t.hasOn=function(e){return!!this._eventHandler[e]},t.on=function(e,t){if("object"==typeof e&&a(t)){var n,i=e;for(n in i)this.on(n,i[n])}else{var r;"string"==typeof e&&"function"==typeof t&&(a(r=this._eventHandler[e])&&(this._eventHandler[e]=[],r=this._eventHandler[e]),r.push(t))}return this},t.off=function(e,t){if(a(e))this._eventHandler={};else if(a(t))if("string"==typeof e)delete this._eventHandler[e];else{var n,i=e;for(n in i)this.off(n,i[n])}else{var r=this._eventHandler[e];if(r)for(var o=r.length,s=0;s<o;++s)if(r[s]===t){r.splice(s,1),o<=1&&delete this._eventHandler[e];break}}return this},e.VERSION="3.0.5",e}(),h=u,l=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(e){return this.values[this.keys.indexOf(e)]},t.set=function(e,t){var n=this.keys,i=this.values,r=n.indexOf(e);n[r=-1===r?n.length:r]=e,i[r]=t},e}(),f=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(e){return this.object[e]},t.set=function(e,t){this.object[e]=t},e}(),d="function"==typeof Map,p=function(){function e(){}var t=e.prototype;return t.connect=function(e,t){this.prev=e,this.next=t,e&&(e.next=this),t&&(t.prev=this)},t.disconnect=function(){var e=this.prev,t=this.next;e&&(e.next=t),t&&(t.prev=e)},t.getIndex=function(){for(var e=this,t=-1;e;)e=e.prev,++t;return t},e}(),g=function(){function e(e,t,n,i,r,o,s,a){this.prevList=e,this.list=t,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){i=this.changedBeforeAdded,e=this.fixed,t=[],n=[],i.forEach((function(e){var i=e[0],r=(e=e[1],new p);n[e]=t[i]=r})),t.forEach((function(e,n){e.connect(t[n-1])}));var e,t,n,i=i.filter((function(t,n){return!e[n]})).map((function(e,i){var r,o=e[0];return o===(e=e[1])?[0,0]:(e=n[e-1],r=(o=t[o]).getIndex(),o.disconnect(),e?o.connect(e,e.next):o.connect(void 0,t[0]),[r,o.getIndex()])})),r=this.changed,o=[];this.cacheOrdered=i.filter((function(e,t){var n=e[0],i=(e=e[1],(t=r[t])[0]);t=t[1];if(n!==e)return o.push([i,t]),!0})),this.cachePureChanged=o},e}();function m(e,t,n){var i=d?Map:n?f:l,r=(n=n||function(e){return e},[]),o=[],s=[],a=e.map(n),u=(n=t.map(n),new i),c=new i,h=[],p=[],m={},y=[],R=0,v=0;return a.forEach((function(e,t){u.set(e,t)})),n.forEach((function(e,t){c.set(e,t)})),a.forEach((function(e,t){void 0===(e=c.get(e))?(++v,o.push(t)):m[e]=v})),n.forEach((function(e,t){void 0===(e=u.get(e))?(r.push(t),++R):(s.push([e,t]),v=m[t]||0,h.push([e-v,t-R]),p.push(t===e),e!==t&&y.push([e,t]))})),o.reverse(),new g(e,t,r,o,y,s,h,p)}var y,R="function"==typeof Map?void 0:(y=0,function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++y)});function v(e,t){return m(e,t,R)}var S=function(e,t){return(S=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var E=function(){return(E=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},_=(V="undefined"!=typeof window)?window.navigator.userAgent:"",I=V&&!!("getComputedStyle"in window),C=/MSIE|Trident|Windows Phone|Edge/.test(_),O=V&&!!("addEventListener"in document),P="width",b="height";function T(e,t){return e.getAttribute(t)||""}function M(e){return[].slice.call(e)}function x(e,t){return void 0===t&&(t="data-"),"loading"in e&&"lazy"===e.getAttribute("loading")||!!e.getAttribute(t+"lazy")}function w(e,t,n){O?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function D(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function L(e,t){var n=e["client"+t]||e["offset"+t];return parseFloat(n||(n=e,((I?window.getComputedStyle(n):n.currentStyle)||{})[t.toLowerCase()]))||0}var N=[];function G(e,t){N.length||w(window,"resize",A),e.__PREFIX__=t,N.push(e),k(e)}function k(e,t){void 0===t&&(t="data-");t=e.__PREFIX__||t;var n,i=parseInt(T(e,""+t+P),10)||0,r=parseInt(T(e,""+t+b),10)||0;T(e,t+"fixed")===b?(n=L(e,"Height")||r,e.style[P]=i/r*n+"px"):(n=L(e,"Width")||i,e.style[b]=r/i*n+"px")}function A(){N.forEach((function(e){k(e)}))}_=function(e){function t(t,n){void 0===n&&(n={});var i,r=e.call(this)||this;r.isReady=!1,r.isPreReady=!1,r.hasDataSize=!1,r.hasLoading=!1,r.isSkip=!1,r.onCheck=function(e){r.clear(),e&&"error"===e.type&&r.onError(r.element),r.hasLoading&&r.checkElement()||(e=!r.hasDataSize&&!r.hasLoading,r.onReady(e))},r.options=E({prefix:"data-"},n),r.element=t,n=r.options.prefix;return r.hasDataSize=(i=n,!!t.getAttribute((i=void 0===n?"data-":i)+"width")),r.isSkip=(i=n,!!t.getAttribute((i=void 0===n?"data-":i)+"skip")),r.hasLoading=x(t,n),r}z(t,e);var n=t.prototype;return n.check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(!0),!1):(this.hasDataSize&&G(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},n.addEvents=function(){var e=this,t=this.element;this.constructor.EVENTS.forEach((function(n){w(t,n,e.onCheck)}))},n.clear=function(){var e=this,t=this.element;this.constructor.EVENTS.forEach((function(n){D(t,n,e.onCheck)})),this.removeAutoSizer()},n.destroy=function(){this.clear(),this.off()},n.removeAutoSizer=function(){var e,t,n;this.hasDataSize&&(t=this.options.prefix,e=this.element,(n=N.indexOf(e))<0||(t=T(e,t+"fixed"),delete e.__PREFIX__,e.style[t===b?P:b]="",N.splice(n,1),N.length)||D(window,"resize",A))},n.onError=function(e){this.trigger("error",{element:this.element,target:e})},n.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},n.onReady=function(e){this.isReady||((e=!this.isPreReady&&e)&&(this.isPreReady=!0),this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:e,hasLoading:this.hasLoading,isSkip:this.isSkip}))},n.onAlreadyError=function(e){var t=this;setTimeout((function(){t.onError(e)}))},n.onAlreadyPreReady=function(){var e=this;setTimeout((function(){e.onPreReady()}))},n.onAlreadyReady=function(e){var t=this;setTimeout((function(){t.onReady(e)}))},t.EVENTS=[],t}(c);var K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}z(t,e);var n=t.prototype;return n.setHasLoading=function(e){this.hasLoading=e},n.check=function(){return this.isSkip?(this.onAlreadyReady(!0),!1):(this.hasDataSize?(G(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},n.checkElement=function(){return!0},n.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},n.onAlreadyPreReady=function(){e.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},t.EVENTS=[],t}(_),V=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.readyCount=0,n.preReadyCount=0,n.totalCount=0,n.totalErrorCount=0,n.isPreReadyOver=!0,n.elementInfos=[],n.options=E({loaders:{},prefix:"data-"},t),n}z(t,e);var n=t.prototype;return n.check=function(e){var t=this,n=this.options.prefix;this.clear(),this.elementInfos=M(e).map((function(e,i){var r=t.getLoader(e,{prefix:n});return r.check(),r.on("error",(function(e){t.onError(i,e.target)})).on("preReady",(function(e){var n=((n=t.elementInfos[i]).hasLoading=e.hasLoading,n.isSkip=e.isSkip,t.checkPreReady(i));t.onPreReadyElement(i),n&&t.onPreReady()})).on("ready",(function(e){var n=e.withPreReady,r=e.hasLoading,o=(e=e.isSkip,r=((o=t.elementInfos[i]).hasLoading=r,o.isSkip=e,n&&t.checkPreReady(i)),t.checkReady(i));n&&t.onPreReadyElement(i),t.onReadyElement(i),r&&t.onPreReady(),o&&t.onReady()})),{loader:r,element:e,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}})),e=this.elementInfos.length;return(this.totalCount=e)||setTimeout((function(){t.onPreReady(),t.onReady()})),this},n.getTotalCount=function(){return this.totalCount},n.isPreReady=function(){return this.elementInfos.every((function(e){return e.isPreReady}))},n.isReady=function(){return this.elementInfos.every((function(e){return e.isReady}))},n.hasError=function(){return 0<this.totalErrorCount},n.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach((function(e){e.loader&&e.loader.destroy()})),this.elementInfos=[]},n.destroy=function(){this.clear(),this.off()},n.getLoader=function(e,t){var n,i,r,o,s=this,a=e.tagName.toLowerCase(),u=this.options.loaders,c=t.prefix,h=Object.keys(u);return u[a]?new u[a](e,t):(n=new K(e,t),i=M(e.querySelectorAll(h.join(", "))),n.setHasLoading(i.some((function(e){return x(e,c)}))),r=!1,o=this.clone().on("error",(function(e){n.onError(e.target)})).on("ready",(function(){n.onReady(r)})),n.on("requestChildren",(function(){var t=function(e,t,n){var i=M(e.querySelectorAll(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(["["+n+"skip] ["+n+"width]"],t.map((function(e){return["["+n+"skip] "+e,e+"["+n+"skip]","["+n+"width] "+e].join(", ")}))).join(", ")));return M(e.querySelectorAll("["+n+"width], "+t.join(", "))).filter((function(e){return-1===i.indexOf(e)}))}(e,h,s.options.prefix);o.check(t).on("preReady",(function(e){(r=e.isReady)||n.onPreReady()}))})).on("reqeustReadyChildren",(function(){o.check(i)})).on("requestDestroy",(function(){o.destroy()})),n)},n.clone=function(){return new t(E({},this.options))},n.checkPreReady=function(e){return this.elementInfos[e].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},n.checkReady=function(e){return this.elementInfos[e].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},n.onError=function(e,t){var n=this.elementInfos[e];n.hasError=!0,this.trigger(new h("error",{element:n.element,index:e,target:t,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},n.onPreReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new h("preReadyElement",{element:t.element,index:e,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isSkip:t.isSkip}))},n.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new h("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},n.onReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new h("readyElement",{index:e,element:t.element,hasError:t.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:t.isSkip}))},n.onReady=function(){this.trigger(new h("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},n.getErrorCount=function(){return this.elementInfos.filter((function(e){return e.hasError})).length},n.hasLoading=function(){return this.elementInfos.some((function(e){return e.hasLoading}))},t}(c),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.checkElement=function(){var e=this.element,t=e.getAttribute("src");if(e.complete){if(t)return e.naturalWidth||this.onAlreadyError(e),!1;this.onAlreadyPreReady()}return this.addEvents(),C&&e.setAttribute("src",t),!0},t.EVENTS=["load","error"],t}(_),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.checkElement=function(){var e=this.element;return!(1<=e.readyState||(e.error?(this.onAlreadyError(e),1):(this.addEvents(),0)))},t.EVENTS=["loadedmetadata","error"],t}(_),F=function(e){function t(t){return e.call(this,E({loaders:{img:U,video:j}},t=void 0===t?{}:t))||this}return z(t,e),t}(V),q=function(e,t){return(q=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var B=function(){return(B=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function W(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(s=(o<3?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function H(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var Z,X,Q,J={horizontal:!1,useTransform:!1,percentage:!1,isEqualSize:!1,isConstantSize:!1,gap:0,attributePrefix:"data-grid-",resizeDebounce:100,maxResizeDebounce:0,autoResize:!0,preserveUIOnDestroy:!1,defaultDirection:"end",externalContainerManager:null,externalItemRenderer:null,renderOnPropertyChange:!0,useFit:!0,outlineLength:0,outlineSize:0,useRoundedSize:!0,useResizeObserver:!1,observeChildren:!1},$=((_=Z=Z||{})[_.PROPERTY=1]="PROPERTY",_[_.RENDER_PROPERTY=2]="RENDER_PROPERTY",(V=X=X||{})[V.UNCHECKED=1]="UNCHECKED",V[V.UNMOUNTED=2]="UNMOUNTED",V[V.MOUNTED=3]="MOUNTED",(_=Q=Q||{})[_.NEED_UPDATE=1]="NEED_UPDATE",_[_.WAIT_LOADING=2]="WAIT_LOADING",_[_.UPDATED=3]="UPDATED",{gap:Z.RENDER_PROPERTY,defaultDirection:Z.PROPERTY,renderOnPropertyChange:Z.PROPERTY,preserveUIOnDestroy:Z.PROPERTY,useFit:Z.PROPERTY,outlineSize:Z.RENDER_PROPERTY,outlineLength:Z.RENDER_PROPERTY}),ee={horizontal:{inlinePos:"top",contentPos:"left",inlineSize:"height",contentSize:"width"},vertical:{inlinePos:"left",contentPos:"top",inlineSize:"width",contentSize:"height"}};function te(e,t){var n=ne(e);return v(t.map((function(e){return e.target})),n.map((function(e){return e.element}))).maintained.filter((function(n){var i=n[0];n=n[1],i=t[i].size;return!(n=e[n]).inlineSize||!n.contentSize||i.inlineSize!==n.computedInlineSize||i.blockSize!==n.computedContentSize})).map((function(t){return t=t[1],e[t]}))}function ne(e){return e.filter((function(e){return e.element}))}function ie(e){return ne(e).map((function(e){return e.element}))}function re(e){return"string"==typeof e}function oe(e){return"object"==typeof e}function se(e){return"number"==typeof e}function ae(e){return e.reduce((function(e,t){return e+t}),0)}function ue(e){var t,n=e.prototype,i=e.propertyTypes;for(t in i)!function(e){var t=i[e]===Z.RENDER_PROPERTY,r=(o=Object.getOwnPropertyDescriptor(n,e)||{}).get||function(){return this.options[e]},o=o.set||function(n){var i=this.options;i[e]!==n&&(i[e]=n,t)&&i.renderOnPropertyChange&&this.scheduleRender()};Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:r,set:o})}(t)}function ce(e){for(var t=[],n=0;n<e;++n)t.push(n);return t}function he(e,t){return Math.max(e-t[1],t[0]-e,0)+1}function le(e,t,n){return Math.min(n,Math.max(e,t))}function fe(e,t){var n;return t?(n=1/t,Math.round(e/t)/n):e}var de=function(){function e(e,t){var n=this;void 0===t&&(t={}),this._resizeTimer=0,this._maxResizeDebounceTimer=0,this.rect={width:0,height:0},this._updatedEntries=[],this._onWindowResize=function(){n._scheduleResize([{target:n.container}])},this._onObserve=function(e){var t=n._options,i=n.container,r=t.rectBox,o=t.childrenRectBox;n._scheduleResize(e.map((function(e){var t,n="border-box"===(e.target===i?r:o)?e.borderBoxSize:e.contentBoxSize;return{size:(n=n||[{inlineSize:(t=e.contentRect).width,blockSize:t.height}])[0]||n,target:e.target}})))},this._scheduleResize=function(e){var t=(i=n._options).resizeDebounce,i=i.maxResizeDebounce,r=n._updatedEntries;r.push.apply(r,e),n._updatedEntries=r.filter((function(e,t){return r.lastIndexOf(e)===t})),!n._maxResizeDebounceTimer&&t<=i&&(n._maxResizeDebounceTimer=window.setTimeout(n._onResize,i)),n._resizeTimer&&(clearTimeout(n._resizeTimer),n._resizeTimer=0),n._resizeTimer=window.setTimeout(n._onResize,t)},this._onResize=function(){clearTimeout(n._resizeTimer),clearTimeout(n._maxResizeDebounceTimer),n._maxResizeDebounceTimer=0,n._resizeTimer=0;var e,t,i,r,o=n._updatedEntries,s=n.container,a=(o=o.filter((function(t){return t.target!==s||(e=t,!1)})),0<o.length),u=!!e;u&&(t=n._options.watchDirection,i=n.rect,(r=e.size)?n.setRect({width:r.inlineSize,height:r.blockSize}):n.resize(),r=n.rect,u=!t||("box"===t||"width"===t)&&i.width!==r.width||("box"===t||"height"===t)&&i.height!==r.height),n._updatedEntries=[],(u||a)&&n._emitter.trigger("resize",{isResizeContainer:u,childEntries:o})},this._options=B({resizeDebounce:100,maxResizeDebounce:0,useResizeObserver:!1,useWindowResize:!0,watchDirection:!1,rectBox:"content-box",childrenRectBox:"border-box"},t),this.container=re(e)?document.querySelector(e):e,this._init()}var t=e.prototype;return t.getRect=function(){return this.rect},t.setRect=function(e){this.rect=B({},e)},t.isObserverEnabled=function(){return!!this._observer},t.resize=function(){var e=this.container;this.setRect("border-box"===this._options.rectBox?{width:e.offsetWidth,height:e.offsetHeight}:{width:e.clientWidth,height:e.clientHeight})},t.observeChildren=function(e){var t,n=this._observer;n&&(t=this._options.childrenRectBox,e.forEach((function(e){e&&n.observe(e,{box:t})})))},t.unobserveChildren=function(e){var t=this._observer;t&&e.forEach((function(e){e&&t.unobserve(e)}))},t.listen=function(e){return this._emitter.on("resize",e),this},t.destroy=function(){var e;null!=(e=this._observer)&&e.disconnect(),this._options.useWindowResize&&window.removeEventListener("resize",this._onWindowResize)},t._init=function(){var e=this.container,t=this._options;this._emitter=new c,t.useResizeObserver&&window.ResizeObserver&&(this._observer=new window.ResizeObserver(this._onObserve),this._observer.observe(e,{box:t.rectBox})),t.useWindowResize&&window.addEventListener("resize",this._onWindowResize),this.resize()},e}(),pe=function(e){function t(t,n){var i=e.call(this)||this;return i.container=t,i._onResize=function(e){i.trigger("resize",e)},i.options=B({horizontal:J.horizontal,autoResize:J.autoResize,resizeDebounce:J.resizeDebounce,maxResizeDebounce:J.maxResizeDebounce,useResizeObserver:J.useResizeObserver},n),i._init(),i}Y(t,e);var n=t.prototype;return n.resize=function(){var e=this.container;this.setRect({width:e.clientWidth,height:e.clientHeight})},n.isObserverEnabled=function(){return this._watcher.isObserverEnabled()},n.getRect=function(){return this._watcher.getRect()},n.observeChildren=function(e){this._watcher.observeChildren(e)},n.unobserveChildren=function(e){this._watcher.unobserveChildren(e)},n.setRect=function(e){this._watcher.setRect(e)},n.getInlineSize=function(){return this.getRect()[this._names.inlineSize]},n.getContentSize=function(){return this.getRect()[this._names.contentSize]},n.getStatus=function(){return{rect:this._watcher.getRect()}},n.setStatus=function(e){this.setRect(e.rect),this.setContentSize(this.getContentSize())},n.setContentSize=function(e){var t,n=this.options.horizontal?"width":"height";this.setRect(B(B({},this.getRect()),((t={})[n]=e,t))),this.container.style[n]=e+"px"},n.destroy=function(e){void 0===e&&(e={}),this._watcher.destroy(),e.preserveUI||(this.container.style.cssText=this.orgCSSText)},n._init=function(){var e=this.container,t=window.getComputedStyle(e);this.orgCSSText=e.style.cssText,"static"===t.position&&(e.style.position="relative"),t=this.options;this._watcher=new de(e,{useWindowResize:t.autoResize,useResizeObserver:t.useResizeObserver,resizeDebounce:t.resizeDebounce,maxResizeDebounce:t.maxResizeDebounce,watchDirection:!!t.useResizeObserver&&this._names.inlineSize}).listen(this._onResize)},Object.defineProperty(n,"_names",{get:function(){return ee[this.options.horizontal?"horizontal":"vertical"]},enumerable:!1,configurable:!0}),t}(c),ge=function(){function e(e){this.initialRects={},this.sizePercetage=!1,this.posPercetage=!1,this.options=B({attributePrefix:J.attributePrefix,useTransform:J.useTransform,horizontal:J.horizontal,percentage:J.percentage,isEqualSize:J.isEqualSize,isConstantSize:J.isConstantSize,useRoundedSize:J.useRoundedSize},e),this._init()}var t=e.prototype;return t.resize=function(){this.initialRects={}},t.renderItems=function(e){var t=this;e.forEach((function(e){t._renderItem(e)}))},t.getInlineSize=function(){return this.containerRect[this.options.horizontal?"height":"width"]},t.setContainerRect=function(e){this.containerRect=e},t.updateEqualSizeItems=function(e,t){var n=this,i=(this.updateItems(e),e.some((function(e){return e.attributes.sizeGroup})));(this.options.isEqualSize||i)&&e.some((function(e){return e.updateState===Q.UPDATED}))&&t.forEach((function(t){-1===e.indexOf(t)&&n.updateItem(t,!0)}))},t.updateItems=function(e){var t=this;e.forEach((function(e){t.updateItem(e)}))},t.getStatus=function(){return{initialRects:this.initialRects}},t.setStatus=function(e){this.initialRects=e.initialRects},t._init=function(){var e=this.options.percentage,t=!1,n=!1;!0===e?n=t=!0:e&&(-1<e.indexOf("position")&&(n=!0),-1<e.indexOf("size"))&&(t=!0),this.posPercetage=n,this.sizePercetage=t},t.updateItem=function(e,t){var n=(r=this.options).isEqualSize,i=r.isConstantSize,r=r.useRoundedSize,o=this.initialRects,s=e.orgRect,a=e.element,u=e.updateState===Q.WAIT_LOADING,c=s&&s.width&&s.height,h=a?function(e,t){for(var n={},i=e.attributes,r=i.length,o=0;o<r;++o){var s=(a=i[o]).name,a=a.value;-1!==s.indexOf(t)&&(n[s.replace(t,"").replace(/[\s-_]([a-z])/g,(function(e,t){return t.toUpperCase()}))]=a)}return n}(a,this.options.attributePrefix):e.attributes,l=null!=(l=h.sizeGroup)?l:"",f=h.notEqualSize;if(""!==l&&o[l])d=o[l];else if(n&&!f&&!l&&o[""])d=o[""];else if(i&&c&&!u)d=s;else{if(t||!a)return;var d={left:a.offsetLeft,top:a.offsetTop,width:0,height:0};r?(d.width=a.offsetWidth,d.height=a.offsetHeight):(n=a.getBoundingClientRect(),d.width=n.width,d.height=n.height)}return e.attributes=h,e.shouldReupdate=!1,e.isFirstUpdate&&c||(e.orgRect=B({},d)),e.rect=B({},d),t||(e.element&&(e.mountState=X.MOUNTED),e.updateState===Q.NEED_UPDATE&&(e.updateState=Q.UPDATED,e.isFirstUpdate=!0),u)||f||o[l]||(o[l]=B({},d)),d},t._renderItem=function(e){var t,n,i,r,o,s,a,u,c=e.element,h=e.cssRect;c&&h&&(a=(e=this.options).horizontal,e=e.useTransform,t=this.posPercetage,n=this.sizePercetage,i=["position: absolute;"],r=(a=ee[a?"horizontal":"vertical"]).inlineSize,o=a.inlinePos,s=this.getInlineSize(),u=0<(a=Object.keys(h)).length,e&&(a=a.filter((function(e){return"top"!==e&&"left"!==e})),i.push("transform: translate("+(h.left||0)+"px, "+(h.top||0)+"px);")),i.push.apply(i,a.map((function(e){var i=h[e];return e===r&&n||e===o&&t?e+": "+i/s*100+"%;":e+": "+i+"px;"}))),u)&&(c.style.cssText+=i.join(""))},e}(),me=function(){function e(e,t){void 0===t&&(t={}),this.horizontal=e,this.isUpdating=!1,this.shouldReupdate=!1,this.hasTransition=!1,this.transitionDuration="",this.isRestoreOrgCSSText=!0;e=t.element;var n,i=B({key:"",index:0,orgRect:{left:0,top:0,width:0,height:0},rect:{left:0,top:0,width:0,height:0},cssRect:{},attributes:{},data:{},isFirstUpdate:!1,mountState:X.UNCHECKED,updateState:Q.NEED_UPDATE,element:e||null,orgCSSText:null!=(e=null==e?void 0:e.style.cssText)?e:"",gridData:{}},t);for(n in i)this[n]=i[n]}var t=e.prototype;return Object.defineProperty(t,"orgInlineSize",{get:function(){var e=this._names.inlineSize;return this.orgRect[e]||this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"orgContentSize",{get:function(){var e=this._names.contentSize;return this.orgRect[e]||this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"inlineSize",{get:function(){return this.rect[this._names.inlineSize]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"contentSize",{get:function(){return this.rect[this._names.contentSize]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssInlineSize",{get:function(){return this.cssRect[this._names.inlineSize]},set:function(e){this.cssRect[this._names.inlineSize]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssContentSize",{get:function(){return this.cssRect[this._names.contentSize]},set:function(e){this.cssRect[this._names.contentSize]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssInlinePos",{get:function(){return this.cssRect[this._names.inlinePos]},set:function(e){this.cssRect[this._names.inlinePos]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssContentPos",{get:function(){return this.cssRect[this._names.contentPos]},set:function(e){this.cssRect[this._names.contentPos]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"computedInlineSize",{get:function(){var e=this._names.inlineSize;return this.cssRect[e]||this.rect[e]||this.orgRect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"computedContentSize",{get:function(){var e=this._names.contentSize;return this.cssRect[e]||this.rect[e]||this.orgRect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"computedInlinePos",{get:function(){var e,t=this._names.inlinePos;return null!=(e=this.cssRect[t])?e:this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"computedContentPos",{get:function(){var e,t=this._names.contentPos;return null!=(e=this.cssRect[t])?e:this.rect[t]},enumerable:!1,configurable:!0}),t.setCSSGridRect=function(e){var t,n=ee[this.horizontal?"horizontal":"vertical"],i={};for(t in e)i[n[t]]=e[t];this.cssRect=i},t.getStatus=function(){return{index:this.index,mountState:this.mountState,updateState:this.updateState,attributes:this.attributes,orgCSSText:this.orgCSSText,isFirstUpdate:this.isFirstUpdate,element:null,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,gridData:this.gridData,data:this.data}},t.getMinimizedStatus=function(){var e={orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes,gridData:this.gridData},t=(o=this).key,n=o.mountState,i=o.updateState,r=o.isFirstUpdate,o=o.orgCSSText;return void 0!==t&&(e.key=t),n!==X.UNCHECKED&&(e.mountState=n),i!==Q.NEED_UPDATE&&(e.updateState=i),r&&(e.isFirstUpdate=!0),o&&(e.orgCSSText=o),e},Object.defineProperty(t,"_names",{get:function(){return this.horizontal?ee.horizontal:ee.vertical},enumerable:!1,configurable:!0}),e}(),ye=function(e){function t(t,n){void 0===n&&(n={});var i=e.call(this)||this,r=(n=(i.items=[],i.outlines={start:[],end:[]},i._renderTimer=0,i._onResize=function(e){e.isResizeContainer?i._renderItems({useResize:!0},!0):0<(e=te(i.items,e.childEntries)).length&&i.updateItems(e)},i.options=B(B({},i.constructor.defaultOptions),n),i.containerElement=re(t)?document.querySelector(t):t,i.options),t=n.isEqualSize,n.isConstantSize),o=n.useTransform,s=n.horizontal,a=n.percentage,u=n.externalContainerManager,c=n.externalItemRenderer,h=n.resizeDebounce,l=n.maxResizeDebounce,f=n.autoResize,d=n.useRoundedSize;n=n.useResizeObserver;return i.containerManager=u||new pe(i.containerElement,{horizontal:s,resizeDebounce:h,maxResizeDebounce:l,autoResize:f,useResizeObserver:n}).on("resize",i._onResize),i.itemRenderer=c||new ge({useTransform:o,isEqualSize:t,isConstantSize:r,percentage:a,useRoundedSize:d}),i._init(),i}Y(t,e);var n=t.prototype;return n.getContainerElement=function(){return this.containerElement},n.getItems=function(){return this.items},n.getChildren=function(){return[].slice.call(this.containerElement.children)},n.setItems=function(e){e.forEach((function(e,t){e.index=t}));var t=this.options;return t.useResizeObserver&&t.observeChildren&&((t=this.containerManager).unobserveChildren(ie(this.items)),t.observeChildren(ie(e))),this.items=e,this},n.getContainerInlineSize=function(){return this.containerManager.getInlineSize()},n.getOutlines=function(){return this.outlines},n.setOutlines=function(e){return this.outlines=e,this},n.syncElements=function(e){void 0===e&&(e={});var t=this.items,n=this.options.horizontal,i=this.getChildren(),r=v(this.items.map((function(e){return e.element})),i),o=r.added,s=r.maintained,a=r.changed,u=(r=r.removed,[]);return s.forEach((function(e){var n=e[0];e=e[1];u[e]=t[n]})),o.forEach((function(e){u[e]=new me(n,{element:i[e]})})),this.setItems(u),(o.length||r.length||a.length)&&this.renderItems(e),this},n.updateItems=function(e,t){void 0===e&&(e=this.items);var n=(t=void 0===t?{}:t).useOrgResize;return e.forEach((function(e){var t;n&&((t=e.orgRect).width=0,t.height=0),e.updateState=Q.NEED_UPDATE})),this.checkReady(t),this},n.renderItems=function(e){return this._renderItems(e=void 0===e?{}:e),this},n.getStatus=function(e){return{outlines:this.outlines,items:this.items.map((function(t){return e?t.getMinimizedStatus():t.getStatus()})),containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus()}},n.setStatus=function(e){var t=this,n=this.options.horizontal,i=this.containerManager,r=i.getInlineSize(),o=this.getChildren();return this.itemRenderer.setStatus(e.itemRenderer),i.setStatus(e.containerManager),this.outlines=e.outlines,this.items=e.items.map((function(e,t){return new me(n,B(B({},e),{element:o[t]}))})),this.itemRenderer.renderItems(this.items),r!==i.getInlineSize()?this.renderItems({useResize:!0}):window.setTimeout((function(){t._renderComplete({direction:t.defaultDirection,mounted:t.items,updated:[],isResize:!1})})),this},n.getComputedOutlineSize=function(e){return void 0===e&&(e=this.items),this.options.outlineSize||this.getContainerInlineSize()},n.getComputedOutlineLength=function(e){return void 0===e&&(e=this.items),this.options.outlineLength||1},n.destroy=function(e){e=void 0===(e=(e=void 0===e?{}:e).preserveUI)?this.options.preserveUIOnDestroy:e;this.containerManager.destroy({preserveUI:e}),e||this.items.forEach((function(e){var t=e.element;e=e.orgCSSText;t&&(t.style.cssText=e)})),null!=(e=this._im)&&e.destroy()},n.getInlineGap=function(){return this._getDirectionalGap("inline")},n.getContentGap=function(){return this._getDirectionalGap("content")},n.checkReady=function(e){var t=this,n=(void 0===e&&(e={}),this.items),i=n.filter((function(e){var t;return(null==(t=e.element)?void 0:t.parentNode)&&e.updateState!==Q.UPDATED})),r=n.filter((function(e){var t;return(null==(t=e.element)?void 0:t.parentNode)&&e.mountState!==X.MOUNTED})),o=[];r.filter((function(e){var t;return!!e.hasTransition||(t=e.element,0<parseFloat(getComputedStyle(t).transitionDuration)&&(e.hasTransition=!0,e.transitionDuration=t.style.transitionDuration,!0))})).forEach((function(e){e.element.style.transitionDuration="0s"})),null!=(n=this._im)&&n.destroy(),this._im=new F({prefix:this.options.attributePrefix}).on("preReadyElement",(function(e){i[e.index].updateState=Q.WAIT_LOADING})).on("preReady",(function(){i.forEach((function(e){var t=e.orgRect.width&&e.orgRect.height,n=e.cssRect.width||e.cssRect.height;!t&&n&&(e.element.style.cssText=e.orgCSSText)})),t._updateItems(i),t.readyItems(r,i,e)})).on("readyElement",(function(n){var r=i[n.index];r.updateState=Q.NEED_UPDATE,n.isPreReadyOver&&(r.isRestoreOrgCSSText&&(r.element.style.cssText=r.orgCSSText),t._updateItems([r]),t.readyItems([],[r],e))})).on("error",(function(e){var n=i[e.index];t.trigger("contentError",{element:e.element,target:e.target,item:n,update:function(){o.push(n)}})})).on("ready",(function(){o.length&&t.updateItems(o)})).check(i.map((function(e){return e.element})))},n.scheduleRender=function(){var e=this;this._clearRenderTimer(),this._renderTimer=window.setTimeout((function(){e.renderItems()}))},n.fitOutlines=function(e){void 0===e&&(e=this.useFit);var t=this.outlines,n=t.start,i=t.end,r=n.length?Math.min.apply(Math,n):0;!e&&0<r||(t.start=n.map((function(e){return e-r})),t.end=i.map((function(e){return e-r})),this.items.forEach((function(e){var t=e.cssContentPos;se(t)&&(e.cssContentPos=t-r)})))},n.readyItems=function(e,t,n){var i=this.outlines,r=n.direction||this.options.defaultDirection,o=(i=n.outline||i["end"===r?"start":"end"],this.items),s={start:H([],i),end:H([],i)};e.forEach((function(e){e.mountState=X.MOUNTED})),t.forEach((function(e){e.isUpdating=!0})),o.length&&(s=this.applyGrid(this.items,r,i)),t.forEach((function(e){e.isUpdating=!1})),this.setOutlines(s),this.fitOutlines(),this.itemRenderer.renderItems(this.items),this._refreshContainerContentSize(),o=e.filter((function(e){return e.hasTransition})),o.length&&(this.containerManager.resize(),o.forEach((function(e){e.element.style.transitionDuration=e.transitionDuration}))),this._renderComplete({direction:r,mounted:e,updated:t,isResize:!!n.useResize}),i=t.filter((function(e){return e.shouldReupdate}));i.length&&this.updateItems(i)},n._isObserverEnabled=function(){return this.containerManager.isObserverEnabled()},n._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.getItems())},n._getDirectionalGap=function(e){var t=this.options.horizontal,n=this.options.gap;return"number"==typeof n?n:null!=(t=t&&"inline"===e||!t&&"content"===e?n.vertical:n.horizontal)?t:J.gap},n._renderComplete=function(e){this.trigger("renderComplete",e)},n._clearRenderTimer=function(){clearTimeout(this._renderTimer),this._renderTimer=0},n._refreshContainerContentSize=function(){var e=(t=this.outlines).start,t=t.end,n=this.getContentGap();t=t.length?Math.max.apply(Math,t):0,e=e.length?Math.max.apply(Math,e):0,e=Math.max(e,t-n);this.containerManager.setContentSize(e)},n._resizeContainer=function(){this.containerManager.resize(),this.itemRenderer.setContainerRect(this.containerManager.getRect())},n._init=function(){this._resizeContainer()},n._renderItems=function(e,t){void 0===e&&(e={}),this._clearRenderTimer();var n=e.useResize||e.useOrgResize;n&&!t&&(this._resizeContainer(),this.itemRenderer.resize()),!this.getItems().length&&this.getChildren().length?this.syncElements(e):n?this.updateItems(this.items,e):this.checkReady(e)},t.defaultOptions=J,t.propertyTypes=$,W([ue],t)}(c);function Re(e,t,n,i){return Math[i].apply(Math,e.slice(t,t+n))}var ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Y(t,e);var n=t.prototype;return n.applyGrid=function(e,t,n){e.forEach((function(e){e.isRestoreOrgCSSText=!1}));for(var i,r=this.getComputedOutlineSize(e),o=this.getComputedOutlineLength(e),s=(c=this.options).align,a=c.observeChildren,u=c.columnSizeRatio,c=c.contentAlign,h=this.getContentGap(),l=this.getContentGap(),f=n.length,d=e.length,p=this._getAlignPoses(o,r),g="end"===t,m=g?"min":"max",y=g?"max":"min",R=(t=[0],(t=f===o?n.slice():(i=f?Math[y].apply(Math,n):0,ce(o).map((function(){return i})))).slice()),v=1<o?p[1]-p[0]:0,S="stretch"===s,z=g&&"start"===c,E=g?-1/0:1/0,_=(z&&(E=Math.min.apply(Math,R)),function(t){t=e[g?t:d-1-t];var n,i,s,c,f,_,C=parseInt(t.attributes.column||"1",10),O=parseInt(t.attributes.maxColumn||"1",10),P=t.contentSize,b=Math.min(o,C||Math.max(1,Math.ceil((t.inlineSize+h)/v))),T=Math.min(o,Math.max(b,O)),M=(i=b,O=m,s=E,c=(n=R).length-i+1,f="max"===O?"min":"max",_="max"===O?"lastIndexOf":"indexOf",(c=ce(c).map((function(e){return e=Re(n,e,i,f),Math[f](s,e)})))[_](Math[O].apply(Math,c))),x=Re(R,M,b,y);for(z&&E!==x&&(E=Math.max.apply(Math,R),R=R.map((function(){return E})),x=E,M=0);b<T;){var w=M+b,D=M-1;if(g&&(o<=w||R[w]>x))break;if(!g&&(D<0||R[D]<x))break;g||--M,++b}M=Math.max(0,M),b=Math.min(o-M,b),(0<C&&1<b||S)&&(_=(b-1)*v+r,I._isObserverEnabled()&&a||t.cssInlineSize===_||(t.shouldReupdate=!0),t.cssInlineSize=_),0<u&&(P=t.computedInlineSize/u,t.cssContentSize=P);O=p[M],x=g?x:x-l-P;var L=(t.cssInlinePos=O,t.cssContentPos=x,g?x+P+l:x);ce(b).forEach((function(e){R[M+e]=L}))}),I=this,C=0;C<d;++C)_(C);return z&&E!==Math.min.apply(Math,R)&&(E=Math.max.apply(Math,R),R=R.map((function(){return E}))),{start:g?t:R,end:g?R:t}},n.getComputedOutlineSize=function(e){void 0===e&&(e=this.items);var t=this.options.align,n=this.getInlineGap(),i=this.getContainerInlineSize(),r=this.columnSize||this.outlineSize,o=this.column||this.outlineLength,s=o||1,a=0;if("stretch"===t)o||(t=this.maxStretchColumnSize||1/0,s=Math.max(1,Math.ceil((i+n)/(t+n)))),a=(i+n)/(s||1)-n;else if(r)a=r;else if(e.length){for(var u=e[0],c=0,h=e;c<h.length;c++){var l=h[c],f=l.attributes,d=parseInt(f.column||"1",10);f=parseInt(f.maxColumn||"1",10);if(l.updateState===Q.UPDATED&&l.inlineSize&&1===d&&1===f){u=l;break}}a=u.inlineSize||0}else a=i;return a||0},n.getComputedOutlineLength=function(e){void 0===e&&(e=this.items);var t=this.getInlineGap(),n=this.column||this.outlineLength,i=this.columnCalculationThreshold;return n||(n=this.getComputedOutlineSize(e),Math.min(e.length,Math.max(1,Math.floor((this.getContainerInlineSize()+t)/(n-i+t)))))},n._getAlignPoses=function(e,t){var n,i=this.options.align,r=this.getInlineGap(),o=this.getContainerInlineSize(),s=ce(e),a=0,u=0;return"justify"===i||"stretch"===i?(u=(n=e-1)?Math.max((o-t)/n,t+r):0,a=Math.min(0,o/2-(n*u+t)/2)):(n=(e-1)*(u=t+r)+t,"center"===i?a=(o-n)/2:"end"===i&&(a=o-n)),s.map((function(e){return a+e*u}))},t.propertyTypes=B(B({},ye.propertyTypes),{column:Z.RENDER_PROPERTY,columnSize:Z.RENDER_PROPERTY,columnSizeRatio:Z.RENDER_PROPERTY,align:Z.RENDER_PROPERTY,columnCalculationThreshold:Z.RENDER_PROPERTY,maxStretchColumnSize:Z.RENDER_PROPERTY,contentAlign:Z.RENDER_PROPERTY}),t.defaultOptions=B(B({},ye.defaultOptions),{align:"justify",column:0,columnSize:0,columnSizeRatio:0,columnCalculationThreshold:.5,maxStretchColumnSize:1/0,contentAlign:"masonry"}),W([ue],t)}(ye);var Se=function(){function e(e){this.content=[],this.scoreFunction=e}var t=e.prototype;return t.push=function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},t.pop=function(){var e=this.content[0],t=this.content.pop();return 0<this.content.length&&(this.content[0]=t,this.sinkDown(0)),e},t.size=function(){return this.content.length},t.bubbleUp=function(e){for(var t=e,n=this.content[t];0<t;){var i=Math.floor((t+1)/2)-1,r=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(r)))break;this.content[i]=n,this.content[t]=r,t=i}},t.sinkDown=function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var r,o=2*(e+1),s=o-1,a=null;if(s<t&&(r=this.content[s],(r=this.scoreFunction(r))<i)&&(a=s),null===(a=o<t&&(s=this.content[o],this.scoreFunction(s)<(null==a?i:r))?o:a))break;this.content[e]=this.content[a],this.content[a]=n,e=a}},e}();function ze(e,t){var n,i;return se(t)?t:(n="+"===(n=t.charAt(0))?1:"-"===n?-1:0,i=parseFloat(t),t.match(/%$/g)&&(i*=e/100),n?e+i:i)}function Ee(e,t){var n=e.orgInlineSize,i=e.orgContentSize,r=e.gridData.inlineOffset||0;e=e.gridData.contentOffset||0;return n&&i?(i<=e?1:(n-r)/(i-e))*(t-e)+r:t}var _e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Y(t,e);var n=t.prototype;return n.applyGrid=function(e,t,n){var i=this,r=(s=this.options).attributePrefix,o=s.horizontal,s=(e.forEach((function(e){var t,n,s,a,u;e.isUpdating&&(a=e.element,s=e.attributes,t=e.gridData,n=parseFloat(s.inlineOffset),u=parseFloat(s.contentOffset),isNaN(n)&&(n=i.inlineOffset||t.inlineOffset||0),isNaN(u)&&(u=i.contentOffset||0|t.contentOffset),!a||"inlineOffset"in s||"contentOffset"in s||e.mountState!==X.MOUNTED||(s=a.querySelector("["+r+"maintained-target]"))&&(e=a.offsetWidth-a.clientWidth+a.scrollWidth-s.clientWidth,a=a.offsetHeight-a.clientHeight+a.scrollHeight-s.clientHeight,u=o?(n=a,e):(n=e,a)),t.inlineOffset=n,t.contentOffset=u)})),this.options.rowRange),a=[],u="end"===t;return e.length&&(a=s?this._getRowPath(e,u):this._getPath(e,u)),this._setStyle(e,a,n,"end"===t)},n._getRowPath=function(e,t){var n=this._getColumnRange(),i=this._getRowRange();return null!=(n=null==(e=this._getRowLink(e,{path:[0],cost:0,length:0,currentNode:0},n,i,t))?void 0:e.path.map((function(e){return""+e})))?n:[]},n._getRowLink=function(e,t,n,i,r){var o=n[0],s=i[0],a=i[1],u=e.length,c=t.path,h=t.length,l=t.cost,f=t.currentNode;return f<u&&(a<=h||u<f+o)?(o=he(u-f,n)*Math.abs(this._getCost(e,f,u,r)),B(B({},t),{length:h+1,path:H(H([],c),[u]),currentNode:u,cost:l+o,isOver:!0})):u<=f?B(B({},t),{currentNode:u,isOver:h<s||a<h}):this._searchRowLink(e,t,u,n,i,r)},n._searchRowLink=function(e,t,n,i,r,o){for(var s,a=i[0],u=i[1],c=t.currentNode,h=t.path,l=t.length,f=t.cost,d=Math.min(n,c+u),p=[],g=c+a;g<=d;++g)g!==c&&(s=Math.abs(this._getCost(e,c,g,o)),s=this._getRowLink(e,{path:H(H([],h),[g]),length:l+1,cost:f+s,currentNode:g},i,r,o))&&p.push(s);return p.sort((function(e,t){var n=e.isOver;return n!==t.isOver?n?1:-1:he(e.length,r)-he(t.length,r)||e.cost-t.cost})),p[0]},n._getExpectedRowSize=function(e,t){var n=this.getContainerInlineSize()-this.getInlineGap()*(e.length-1),i=n,r=0,o=0;if(e.forEach((function(e){var t,n=e.orgInlineSize,s=e.orgContentSize;n&&s?(t=e.gridData.inlineOffset||0,e=e.gridData.contentOffset||0,r+=n=s<=e?1:(n-t)/(s-e),o+=e*n,i-=t):r+=1})),r){var s=(i+o)/r;if(this.stretch){var a=le(s,(c=this._getSizeRange())[0],c[1]);if(t)return a;var u=this.stretchRange,c=e.map((function(e){return Ee(e,a)}));t=c.reduce((function(t,n,i){return t+ze(n,e[i].attributes.minStretch||u[0])}),0),c=c.reduce((function(t,n,i){return t+ze(n,e[i].attributes.maxStretch||u[1])}),0);if(t<=n&&n<=c)return a}return s}return 0},n._getExpectedInlineSizes=function(e,t){var n=this.options,i=n.stretch,r=n.stretchRange;return e.map((function(e){var n=i?ze(e.orgInlineSize,e.attributes.minStretch||r[0]):-1/0,o=i?ze(e.orgInlineSize,e.attributes.maxStretch||r[1]):1/0,s=!1,a=!1;return o<=(e=Ee(e,t))?s=!0:e<=n&&(a=!0),{minSize:n,maxSize:o,size:le(e,n,o),originalSize:e,isMax:s,isMin:a}}))},n._getStretchItemInfos=function(e,t){var n=e.length,i=this.getContainerInlineSize()-this.getInlineGap()*(Math.max(1,n)-1),r=(e=ae((n=this._getExpectedInlineSizes(e,t)).map((function(e){return e.size}))),t=i-e,i/ae(n.map((function(e){return e.originalSize})))),o=n.map((function(e){return B(B({},e),{passed:!1,size:e.originalSize*r})}));if(0==t)return{infos:o,cost:0};for(var s=0<t,a=o.length,u=0;u<a&&"break"!==function(){var e=ae(o.map((function(e){return e.passed?e.size:0}))),t=ae(o.map((function(e){return e.passed?0:e.originalSize}))),n=(i-e)/t;if(o.forEach((function(e){e.passed||(s?e.size>e.maxSize&&(n=Math.min(n,e.maxSize/e.originalSize)):e.size<e.minSize&&(n=Math.max(n,e.minSize/e.originalSize)))})),o.forEach((function(e){!e.passed&&(e.size=le(e.originalSize*n,e.minSize,e.maxSize),s&&!fe(e.size-e.maxSize,.001)||!s&&!fe(e.size-e.minSize,.001))&&(e.passed=!0)})),o.every((function(e){return e.passed})))return"break"}();++u);var c=i/ae(o.map((function(e){return e.size})));return fe(c-1,.001)&&o.forEach((function(e){e.size*=c})),{infos:o,cost:ae(o.map((function(e){var t=1,n=((e.size>e.maxSize||e.size<e.minSize)&&(t=2),e.originalSize);n=s?Math.max(n,e.minSize):Math.min(n,e.maxSize);return Math.abs(e.size-n)*t})))}},n._getExpectedInlineSize=function(e,t){var n=this.getInlineGap();return(t=this._getExpectedInlineSizes(e,t)).length?ae(t.map((function(e){return e.size})))+n*(e.length-1):0},n._getCost=function(e,t,n,i){var r=e.slice(t,n),o=this.getContainerInlineSize(),s=this._getExpectedRowSize(r),a=(u=this._getSizeRange())[0],u=u[1];if(this.isCroppedSize)return a<=s&&s<=u?0:(h=this._getExpectedInlineSize(r,s<a?a:u),Math.pow(h-o,2));var c,h,l=0;if(this.stretch)return s<a?s=a:u<s&&(s=u),c=Math.abs(s-a),h=this._getExpectedInlineSize(r,s),(l=!this.passUnstretchRow||(i?n!==e.length:0!==t)||o<=h?this._getStretchItemInfos(r,s).cost:l)+c;if(isFinite(u)){if(s<a)return Math.pow(s-a,2)+Math.pow(u,2)+l;if(u<s)return Math.pow(s-u,2)+Math.pow(u,2)+l}else if(s<a)return Math.max(Math.pow(a,2),Math.pow(s,2))+Math.pow(u,2)+l;return s-a+l},n._getPath=function(e,t){var n,i=this,r=e.length,o=(n=oe(n=this.options.columnRange)?n:[n,n])[0],s=n[1];return function(e,t,n){for(var i=function(e,t,n){var i,r,o,s,a,u,c={},h={},l=(h[t]=0,new Se((function(e){return e.cost})));for(l.push({value:t,cost:0});l.size();)for(var f in r=(i=l.pop()).value,o=i.cost,s=e(r)||{})a=o+s[f],(void 0===(u=h[f])||a<u)&&(l.push({value:f,cost:h[f]=a}),c[f]=r);if(void 0===h[n])throw t=["Could not find a path from ",t," to ",n,"."].join(""),new Error(t);return c}(e,t,n),r=[],o=n;o;)r.push(o),o=i[o];return r.reverse(),r}((function(n){for(var a={},u=parseInt(n,10),c=Math.min(u+o,r);c<=r&&!(s<c-u);++c){var h=i._getCost(e,u,c,t);h<0&&c===r&&(h=0),a[""+c]=Math.pow(h,2)}return a}),"0",""+r)},n._setStyle=function(e,t,n,i){var r,o,s,a=this,u=(p=(void 0===n&&(n=[]),this.options)).isCroppedSize,c=p.displayedRow,h=p.stretch,l=p.passUnstretchRow,f=e.length,d=this._getSizeRange(),p=n[0]||0,g=this.getContainerInlineSize(),m=this.getInlineGap(),y=this.getContentGap(),R=(n=function(e,t){for(var n=t.length,i=[],r=0;r<n-1;++r){var o=parseInt(t[r],10),s=parseInt(t[r+1],10);i.push(e.slice(o,s))}return i}(e,t),n.length),v=p,S=0;return n.forEach((function(e,t){var n,s,p=e.length,z=a._getExpectedRowSize(e,!0),E=(u&&(z=Math.max(d[0],Math.min(z,d[1]))),m*(length-1)),_=e.map((function(e,t){var n=Ee(e,z);return{index:t,item:e,inlineSize:n,orgInlineSize:n,maxInlineSize:n,minInlineSize:n}})),I=a._getExpectedInlineSize(e,z),C=(g-E)/(I-E),O=I-E;E=g-E;h&&I&&E!=O&&(l&&O<E&&(i?t===R-1:0===t)?(o=[v],r=e.map((function(e,t){return f-p+t})),n=a._getExpectedInlineSizes(e,z),_.forEach((function(e,t){e.minInlineSize=n[t].minSize,e.maxInlineSize=n[t].maxSize,e.inlineSize=le(e.inlineSize,e.minInlineSize,e.maxInlineSize)}))):(s=a._getStretchItemInfos(e,z).infos,_.forEach((function(e,t){e.inlineSize=s[t].size,e.minInlineSize=s[t].minSize,e.maxInlineSize=s[t].maxSize})))),_.forEach((function(t,n){var i=t.item,r=t.inlineSize,o=(n=(n=e[n-1])?n.cssInlinePos+n.cssInlineSize+m:0,u&&(r*=C),i.gridData);o.orgInlineSize=t.orgInlineSize,o.orgContentSize=z,o.minInlineSize=t.minInlineSize,o.maxInlineSize=t.maxInlineSize,i.setCSSGridRect({inlinePos:n,contentPos:v,inlineSize:r,contentSize:z})})),v+=y+z,(c<0||t<c)&&(S=v)})),i?{start:[p],end:[S],passedItems:r,passed:o}:(s=v-p,e.forEach((function(e){e.cssContentPos-=s})),{passedItems:r,passed:o?[o[0]-s]:null,start:[p-s],end:[p]})},n.getComputedOutlineLength=function(){return 1},n.getComputedOutlineSize=function(){return this.getContainerInlineSize()},n._getRowRange=function(){var e=this.rowRange;return oe(e)?e:[e,e]},n._getColumnRange=function(){var e=this.columnRange;return oe(e)?e:[e,e]},n._getSizeRange=function(){var e=this.sizeRange;return oe(e)?e:[e,e]},t.propertyTypes=B(B({},ye.propertyTypes),{columnRange:Z.RENDER_PROPERTY,rowRange:Z.RENDER_PROPERTY,sizeRange:Z.RENDER_PROPERTY,isCroppedSize:Z.RENDER_PROPERTY,displayedRow:Z.RENDER_PROPERTY,stretch:Z.RENDER_PROPERTY,stretchRange:Z.RENDER_PROPERTY,passUnstretchRow:Z.RENDER_PROPERTY,inlineMargin:Z.RENDER_PROPERTY,contentMargin:Z.RENDER_PROPERTY,inlineOffset:Z.RENDER_PROPERTY,contentOffset:Z.RENDER_PROPERTY}),t.defaultOptions=B(B({},ye.defaultOptions),{columnRange:[1,8],rowRange:0,sizeRange:[0,1/0],displayedRow:-1,isCroppedSize:!1,stretch:!1,passUnstretchRow:!0,stretchRange:["-20%","+20%"],inlineOffset:0,contentOffset:0}),W([ue],t)}(ye);function Ie(e){var t=-1/0;return e.forEach((function(e){isFinite(e)&&(t=Math.max(t,e))})),isFinite(t)?t:0}function Ce(e,t,n){return Ie(e)+function(e,t,n){var i=e.length;if(!i)return 0;var r=function(e){var t=1/0;return e.forEach((function(e){isFinite(e)&&(t=Math.min(t,e))})),isFinite(t)?t:0}(t),o=Ie(e),s=0;if(!n)return 0;for(var a=0;a<i;++a){var u=e[a],c=t[a];isFinite(u)&&isFinite(c)&&(u-=o,c-=r,s=a?Math.max(s,s+u-c):u-c)}return s}(e,t,n)}function Oe(e,t,n){for(var i=n.inlinePos,r=n.inlineSize,o=n.contentPos,s=n.contentSize,a=i;a<i+r;++a)e[a]=Math.min(e[a],o),t[a]=Math.max(t[a],o+s)}var Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Y(t,e);var n=t.prototype;return n.applyGrid=function(e,t,n){var i=this._getFrame(),r=i.inlineSize,o=i.contentSize,s=i.rects,a=this.options.useFrameFill,u=(b=this.getRectSize(r)).inlineSize,c=b.contentSize,h=this.getInlineGap(),l=this.getContentGap(),f=e.length;if(!f||!r||!o)return{start:n,end:n};for(var d=s.length,p=ce(r).map((function(){return 1/0})),g=ce(r).map((function(){return-1/0})),m=i.outline.map((function(e){return e*(c+l)})),y=0;y<f;y+=d)for(var R=Ce(g,m,a),v=0;v<d&&y+v<f;++v){var S,z=e[y+v],E=(S=s[v]).contentPos,_=S.inlinePos,I=S.contentSize,C=_*(u+h),O=(S=S.inlineSize)*(u+h)-h;Oe(p,g,{inlinePos:_,inlineSize:S,contentPos:E=R+E*(c+l),contentSize:(I=I*(c+l)-l)+l}),z.setCSSGridRect({inlinePos:C,contentPos:E,inlineSize:O,contentSize:I})}var P,b="end"===t,T=((o=n.length?n:[0]).length!==r&&(P=(b?Math.max:Math.min).apply(Math,o),o=ce(r).map((function(){return P}))),p=p.map((function(e){return isFinite(e)?e:0})),g=g.map((function(e){return isFinite(e)?e:0})),b?Ce(o,p,a):Ce(g,o,a));return e.forEach((function(e){e.cssContentPos+=T})),{start:p.map((function(e){return e+T})),end:g.map((function(e){return e+T}))}},n.getComputedOutlineLength=function(){var e=this.options.frame;return e.length?e[0].length:0},n.getComputedOutlineSize=function(){var e,t=this.options.rectSize;return"object"==typeof t?t.inlineSize:(e=this.getInlineGap(),t||(this.getContainerInlineSize()+e)/this.getComputedOutlineLength()-e)},n.getRectSize=function(e){var t,n=this.options.rectSize;return"object"==typeof n?n:(t=this.getInlineGap(),{inlineSize:n=n||(this.getContainerInlineSize()+t)/e-t,contentSize:n})},n._getFrame=function(){for(var e=this.options.frame,t=e.length,n=t?e[0].length:0,i=[],r={},o=ce(n).map((function(){return 1/0})),s=ce(n).map((function(){return-1/0})),a=0;a<t;++a)for(var u=0;u<n;++u){var c=e[a][u];!c||r[a+","+u]||(Oe(o,s,c=this._findRect(r,c,a,u,n,t)),i.push(c))}return i.sort((function(e,t){return e.type<t.type?-1:1})),{rects:i,inlineSize:n,contentSize:t,outline:o}},n._findRect=function(e,t,n,i,r,o){for(var s=this.options.frame,a=1,u=1,c=i;c<r&&s[n][c]===t;++c)u=c-i+1;for(var h=n;h<o&&s[h][i]===t;++h)a=h-n+1;for(var l=n;l<n+a;++l)for(var f=i;f<i+u;++f)e[l+","+f]=!0;return{type:t,inlinePos:i,contentPos:n,inlineSize:u,contentSize:a}},t.propertyTypes=B(B({},ye.propertyTypes),{frame:Z.RENDER_PROPERTY,useFrameFill:Z.RENDER_PROPERTY,rectSize:Z.RENDER_PROPERTY}),t.defaultOptions=B(B({},ye.defaultOptions),{frame:[],rectSize:0,useFrameFill:!0}),W([ue],t)}(ye),be=function(){function e(e){var t,n=B({orgInlineSize:0,orgContentSize:0,inlineSize:0,contentSize:0,inlinePos:0,contentPos:0,items:[]},e);for(t in n)this[t]=n[t]}var t=e.prototype;return t.scaleTo=function(e,t){var n=this.inlineSize?e/this.inlineSize:0,i=this.contentSize?t/this.contentSize:0;this.items.forEach((function(e){0!=n&&(e.inlinePos*=n,e.inlineSize*=n),0!=i&&(e.contentPos*=i,e.contentSize*=i)})),this.inlineSize=e,this.contentSize=t},t.push=function(e){this.items.push(e)},t.getOrgSizeWeight=function(){return this.orgInlineSize*this.orgContentSize},t.getSize=function(){return this.inlineSize*this.contentSize},t.getOrgRatio=function(){return 0===this.orgContentSize?0:this.orgInlineSize/this.orgContentSize},t.getRatio=function(){return 0===this.contentSize?0:this.inlineSize/this.contentSize},e}();function Te(e,t){return(e=(e/=t)<1?1/e:e)-1}var Me,xe,we,De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Y(t,e);var n=t.prototype;return n.applyGrid=function(e,t,n){var i=this,r=this.options.aspectRatio,o=this.getContainerInlineSize(),s=o/r,a=this.getInlineGap(),u=this.getContentGap(),c=(r=n.length?n:[0],"end"===t?Math.max.apply(Math,r):Math.min.apply(Math,r)-s-u),h=(n=c+s+u,new be({}));return e.forEach((function(e){e=new be({inlineSize:e.orgInlineSize,contentSize:e.orgContentSize,orgInlineSize:e.orgInlineSize,orgContentSize:e.orgContentSize}),i._findBestFitArea(h,e),h.push(e),h.scaleTo(o+a,s+u)})),e.forEach((function(e,t){var n=(t=h.items[t]).inlineSize-a,i=t.contentSize-u,r=c+t.contentPos;t=t.inlinePos;e.setCSSGridRect({inlinePos:t,contentPos:r,inlineSize:n,contentSize:i})})),{start:[c],end:[n]}},n._findBestFitArea=function(e,t){var n,i,r,o,s,a,u,c,h,l,f;0===e.getRatio()?(e.orgInlineSize=t.inlineSize,e.orgContentSize=t.contentSize,e.inlineSize=t.inlineSize,e.contentSize=t.contentSize):(i=1/0,r=!1,o={inlineSize:0,contentSize:0},s={inlineSize:0,contentSize:0},a=this._getWeight("size"),u=this._getWeight("ratio"),e.items.forEach((function(e){for(var c=Te(e.getOrgSizeWeight(),e.getSize())*a,h=Te(e.getOrgRatio(),e.getRatio())*u,l=e.inlineSize,f=e.contentSize,d=0;d<2;++d){var p=void 0,g=void 0,m=void 0,y=void 0,R=(0===d?(m=p=l,y=f-(g=f*(t.contentSize/(e.orgContentSize+t.contentSize)))):(y=g=f,m=l-(p=l*(t.inlineSize/(e.orgInlineSize+t.inlineSize)))),p*g),v=p/g,S=m*y,z=y/y;R=Te(t.getSize(),R)*a;(R=(R=(R+=Te(t.getRatio(),v)*u)+(Te(e.getOrgSizeWeight(),S)*a-c))+(Te(e.getOrgRatio(),z)*u-h))===Math.min(R,i)&&(i=R,n=e,r=0===d,o.inlineSize=p,o.contentSize=g,s.inlineSize=m,s.contentSize=y)}})),e=n,h=o,l=s,f=r,(c=t).contentSize=h.contentSize,c.inlineSize=h.inlineSize,e.contentSize=l.contentSize,e.inlineSize=l.inlineSize,f?(c.contentPos=e.contentPos+e.contentSize,c.inlinePos=e.inlinePos):(c.inlinePos=e.inlinePos+e.inlineSize,c.contentPos=e.contentPos))},n.getComputedOutlineLength=function(){return 1},n.getComputedOutlineSize=function(){return this.getContainerInlineSize()},n._getWeight=function(e){var t=this.options,n=t.weightPriority;return n===e?100:"custom"===n?t[e+"Weight"]:1},t.propertyTypes=B(B({},ye.propertyTypes),{aspectRatio:Z.RENDER_PROPERTY,sizeWeight:Z.RENDER_PROPERTY,ratioWeight:Z.RENDER_PROPERTY,weightPriority:Z.RENDER_PROPERTY}),t.defaultOptions=B(B({},ye.defaultOptions),{aspectRatio:1,sizeWeight:1,ratioWeight:1,weightPriority:"custom"}),W([ue],t)}(ye),Le=(V="undefined"!=typeof window?window.navigator.userAgent:"",/iPhone|iPad/.test(V)),Ne="infinitegrid-container",Ge={renderOnPropertyChange:!0,useFit:!0,autoResize:!0},ke=n({},$),Ae={START:"start",END:"end",NONE:""},Ke={CHANGE_SCROLL:"changeScroll",REQUEST_APPEND:"requestAppend",REQUEST_PREPEND:"requestPrepend",RENDER_COMPLETE:"renderComplete",CONTENT_ERROR:"contentError"},Ve={type:!0,groupKey:!0,key:!0,element:!0,html:!0,data:!0,inserted:!0,attributes:!0},Ue=(_=["insertByGroupIndex","updateItems","getItems","getVisibleItems","getGroups","getVisibleGroups","renderItems","getContainerElement","getScrollContainerElement","getWrapperElement","setStatus","getStatus","removePlaceholders","prependPlaceholders","appendPlaceholders","getStartCursor","getEndCursor","setCursors"],(V=Me=Me||{})[V.NORMAL=0]="NORMAL",V[V.VIRTUAL=1]="VIRTUAL",V[V.LOADING=2]="LOADING",(V=xe=xe||{})[V.NORMAL=0]="NORMAL",V[V.VIRTUAL=1]="VIRTUAL",V[V.LOADING=2]="LOADING",(V=we=we||{})[V.NOT_REMOVE=0]="NOT_REMOVE",V[V.MINIMIZE_INVISIBLE_ITEMS=1]="MINIMIZE_INVISIBLE_ITEMS",V[V.MINIMIZE_INVISIBLE_GROUPS=2]="MINIMIZE_INVISIBLE_GROUPS",V[V.REMOVE_INVISIBLE_GROUPS=3]="REMOVE_INVISIBLE_GROUPS",-9999),je=function(e){function i(t,i){var r,o;return(t=e.call(this,t,n({html:"",type:xe.NORMAL,cssRect:{top:Ue,left:Ue}},i))||this).type===xe.VIRTUAL&&((t.rect.width||t.rect.height)&&(t.mountState=X.UNMOUNTED),i=t.orgRect,r=t.rect,(o=t.cssRect).width?r.width=o.width:i.width&&(r.width=i.width),o.height?r.height=o.height:i.height&&(r.height=i.height)),t}t(i,e);var r=i.prototype;return r.getVirtualStatus=function(){return{type:xe.VIRTUAL,groupKey:this.groupKey,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes}},r.getMinimizedStatus=function(){var t=n(n({},e.prototype.getMinimizedStatus.call(this)),{type:xe.NORMAL,groupKey:this.groupKey});return this.html&&(t.html=this.html),t},i}(me),Fe=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="",t.isWaitEnd=!1,t.initialDisplay=null,t}t(i,e);var r=i.prototype;return r.getLoadingItem=function(){return this.items[0]||null},r.startLoading=function(){var e=this.items[0].element;e&&(null!=this.initialDisplay?this.initialDisplay=e.style.display||"":this.initialDisplay?e.style.display=this.initialDisplay:e.style.removeProperty("display"))},r.endLoading=function(){var e;this.type&&(e=this.items[0].element)&&(e.style.display="none")},r.setLoadingItem=function(e){if(e){var t=this.getLoadingItem();if(t)for(var i in e)t[i]=e[i];else this.items=[new je(this.options.horizontal,n(n({},e),{type:xe.LOADING,key:"__INFINITEGRID__LOADING_ITEM"}))]}else this.items=[]},r.applyGrid=function(e,t,n){var i,r;return e.length?(i=n.length?o([],n,!0):[0],e=e[0],r=e.contentSize+this.getContentGap(),e.cssInlinePos=this.getContainerInlineSize()/2-e.inlineSize/2,"end"===t?(t=Math.max.apply(Math,i),e.cssContentPos=t,{start:i,end:i.map((function(e){return e+r}))}):(t=Math.min.apply(Math,i),e.cssContentPos=t-r,{start:i.map((function(e){return e-r})),end:i})):{start:n,end:n}},i}(ye);function qe(e){var t;return e?("string"==typeof e?t=document.querySelector(e):e instanceof Element?t=e:("value"in e||"current"in e)&&(t=e.value||e.current),t):null}function Ye(e){return e===window}function Be(e){return"number"==typeof e}function We(e){return"string"==typeof e}function He(e){return e.reduce((function(e,t){return o(o([],e,!0),t,!0)}),[])}function Ze(e){var t,i={},r={},o=ye.defaultOptions;for(t in e){var s=e[t];t in Ge||(r[t]=s),t in o&&(i[t]=s)}return n(n({},i),{gridOptions:r})}function Xe(e){var t,n=[],i={},r={},o=(e.filter((function(e){return null!=e.groupKey})).forEach((function(e){e=e.groupKey,r[e]=!0})),!1);return e.forEach((function(s,a){null!=s.groupKey?o=!1:!s.inserted&&e[a-1]?(s.groupKey=e[a-1].groupKey,o=!1):(o||(t=et(r),o=!0,r[t]=!0),s.groupKey=t);a=s.groupKey;var u=i[a];u||(i[a]=u={groupKey:a,items:[]},n.push(u)),u.items.push(s)})),n}function Qe(e,t,n,i){e=m(e,t,(function(e){return e}));var r=-1,o=-1;return e.maintained.forEach((function(e){var t=e[0];e=e[1];n<=t&&t<=i&&(o=-1===r?r=e:(r=Math.min(r,e),Math.max(o,e)))})),{startCursor:r,endCursor:o}}function Je(e,t,n){var i,r=[];if("start"===t){if(-1===(i=rt(e,(function(e){return e.type===Me.NORMAL}))))return[];t=rt(e,(function(e){return 0<=rt(n,(function(t){return t.groupKey===e.groupKey}))})),t=0<=t?Math.min(i,t):i,r=e.slice(0,t)}else{if(-1===(i=ot(e,(function(e){return e.type===Me.NORMAL}))))return[];t=ot(e,(function(e){return 0<=rt(n,(function(t){return t.groupKey===e.groupKey}))})),t=0<=t?Math.max(i,t):i,r=e.slice(t+1)}return r}function $e(e){var t,n=e.prototype;for(t in e.propertyTypes)!function(e){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var t=this.groupManager.options;return(e in t?t:t.gridOptions)[e]},set:function(t){var n;this.groupManager[e]!==t&&(this.groupManager.gridOptions=((n={})[e]=t,n))}})}(t)}function et(e,t){void 0===t&&(t="");for(var n=0;;){var i="infinitegrid_".concat(t).concat(n++);if(!(i in e))return i}}function tt(e){var t=document.createElement("div");return t.innerHTML=e,it(t.children)}function nt(e,t){return(e=We(e)?tt(e):e).map((function(e){var i,r="";if(We(e))r=e;else{if(!("parentNode"in e))return n({groupKey:t,inserted:!0},e);r=(i=e).outerHTML}return{key:void 0,groupKey:t,html:r,element:i,inserted:!0}}))}function it(e){var t=[];if(e)for(var n=e.length,i=0;i<n;i++)t.push(e[i]);return t}function rt(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return i;return-1}function ot(e,t){for(var n=e.length-1;0<=n;--n)if(t(e[n],n))return n;return-1}function st(e,t){return e.length===t.length&&e.every((function(e,n){return t[n]===e}))}function at(e){return He(e.map((function(e){return e.grid.getItems()})))}function ut(e,t){return t?o([],e,!0):e.filter((function(e){return e.type!==xe.VIRTUAL}))}ct=_;var ct,ht,lt=function(e){function s(t,r){var o,s;return(r=e.call(this,t,(s=r.gridOptions,o=i(r,["gridOptions"]),n(n({},Ze(s)),o)))||this).groupItems=[],r.groups=[],r.itemKeys={},r.groupKeys={},r.startCursor=0,r.endCursor=0,r._placeholder=null,r._loadingGrid=new Fe(t,{externalContainerManager:r.containerManager,useFit:!1,autoResize:!1,renderOnPropertyChange:!1,gap:r.gap}),r._mainGrid=r._makeGrid(),r}t(s,e);var a=s.prototype;return Object.defineProperty(a,"gridOptions",{set:function(e){var t,r=(a=Ze(e)).gridOptions,s=i(a,["gridOptions"]),a=this._checkShouldRender(e);for(t in this.options.gridOptions=n(n({},this.options.gridOptions),r),o([this._mainGrid],this.groups.map((function(e){return e.grid})),!0).forEach((function(t){for(var n in e)t[n]=e[n]})),s)this[t]=s[t];this._loadingGrid.gap=this.gap,a&&this.scheduleRender()},enumerable:!1,configurable:!0}),a.getItemByKey=function(e){return this.itemKeys[e]||null},a.getGroupItems=function(e){return ut(this.groupItems,e)},a.getVisibleItems=function(e){return ut(this.items,e)},a.getRenderingItems=function(){return this.hasPlaceholder()?this.items:this.items.filter((function(e){return e.type!==xe.VIRTUAL}))},a.getGroups=function(e){return ut(this.groups,e)},a.hasVisibleVirtualGroups=function(){return this.getVisibleGroups(!0).some((function(e){return e.type===Me.VIRTUAL}))},a.hasPlaceholder=function(){return!!this._placeholder},a.hasLoadingItem=function(){return!!this._getLoadingItem()},a.updateItems=function(t,n){return void 0===t&&(t=this.groupItems),e.prototype.updateItems.call(this,t,n)},a.setPlaceholder=function(e){this._placeholder=e,this._updatePlaceholder()},a.getLoadingType=function(){return this._loadingGrid.type},a.startLoading=function(e){return this._loadingGrid.type=e,this.items=this._getRenderingItems(),!0},a.waitEndLoading=function(){return!!this._loadingGrid.type&&(this._loadingGrid.isWaitEnd=!0)},a.endLoading=function(){var e;return!!this._loadingGrid.isWaitEnd&&(e=this._loadingGrid.type,this._loadingGrid.type="",this._loadingGrid.endLoading(),this.items=this._getRenderingItems(),!!e)},a.setLoading=function(e){this._loadingGrid.setLoadingItem(e),this.items=this._getRenderingItems()},a.getVisibleGroups=function(e){return ut(this.groups.slice(this.startCursor,this.endCursor+1),e)},a.getComputedOutlineLength=function(e){return void 0===e&&(e=this.items),this._mainGrid.getComputedOutlineLength(e)},a.getComputedOutlineSize=function(e){return void 0===e&&(e=this.items),this._mainGrid.getComputedOutlineSize(e)},a.applyGrid=function(e,t,n){var i,r,s,a,u,c,h,l=this,f=this.groups.slice();return f.length?((i=this._loadingGrid).getLoadingItem()&&("start"===i.type?f.unshift(this._getLoadingGroup()):"end"===i.type&&f.push(this._getLoadingGroup())),i=f.slice(),r=n,"start"===t&&i.reverse(),s=this.options.appliedItemChecker,n=this.groupItems,a=this.getComputedOutlineLength(n),u=this.getComputedOutlineSize(n),c=this.itemRenderer,h=[],i.forEach((function(e){var n=e.grid,i=n.getItems();e=e.type===Me.VIRTUAL&&!i[0],h="end"===t?o(o([],h,!0),i,!0):o(o([],i,!0),h,!0),n.outlineLength=a,n.outlineSize=u,i=h.filter((function(e){return e.mountState!==X.UNCHECKED&&e.rect.width||c.updateItem(e,!0),e.orgRect.width&&e.rect.width||s(e,n)})),e=e?l._applyVirtualGrid(n,t,r):i.length?n.applyGrid(i,t,r):{start:o([],r,!0),end:o([],r,!0)};n.setOutlines(e),r=e.passed||e[t],h=null!=(e=null==(i=e.passedItems)?void 0:i.map((function(e){return h[e]})))?e:[]})),{start:f[0].grid.getOutlines().start,end:f[f.length-1].grid.getOutlines().end}):{start:[],end:[]}},a.syncItems=function(e){var t=this,n=this.itemKeys,i=(e=(this.itemKeys={},this._syncItemInfos(e.map((function(e){var t,n=e,i={};for(t in n)t in Ve&&(i[t]=n[t]);return i})),n)),this.groupKeys),r=(n=Xe(e),e=this._splitVirtualGroups("start",n),this._splitVirtualGroups("end",n));e=(n=o(o(o([],e,!0),this._mergeVirtualGroups(n),!0),r,!0)).map((function(e){var n=e.groupKey,r=!(e=e.items)[0]||e[0].type===xe.VIRTUAL,o=null!=(o=null==(o=i[n])?void 0:o.grid)?o:t._makeGrid(),s=r?e:e.filter((function(e){return e.type===xe.NORMAL}));return o.setItems(s),{type:r?Me.VIRTUAL:Me.NORMAL,groupKey:n,grid:o,items:s,renderItems:e}}));this._registerGroups(e)},a.renderItems=function(t){var n;return(t=void 0===t?{}:t).useResize&&(this.groupItems.forEach((function(e){e.updateState=Q.NEED_UPDATE})),n=this._getLoadingItem())&&(n.updateState=Q.NEED_UPDATE),e.prototype.renderItems.call(this,t)},a.setCursors=function(e,t){this.startCursor=e,this.endCursor=t,this.items=this._getRenderingItems()},a.getStartCursor=function(){return this.startCursor},a.getEndCursor=function(){return this.endCursor},a.getGroupStatus=function(e,t){var n,i=this.startCursor,r=this.endCursor,o=this.groups,s=o[i],a=o[r],u=i,c=r,h=e===we.MINIMIZE_INVISIBLE_ITEMS,l=e===we.MINIMIZE_INVISIBLE_GROUPS;if(e===we.REMOVE_INVISIBLE_GROUPS)n=this.getVisibleGroups(t),c=n.length-1,u=0;else if(n=this.getGroups(t),!t){u=-1,c=-1;for(var f=i;f<=r;++f)if((d=o[f])&&d.type!==Me.VIRTUAL){u=n.indexOf(d);break}var d;for(f=r;i<=f;--f)if((d=o[f])&&d.type!==Me.VIRTUAL){c=n.lastIndexOf(d);break}}e=n.map((function(e,t){var n=e.grid,i=(e=e.groupKey,t=t<u||c<t,h&&t),r=(t=l&&t,n.getItems());r=t?[]:r.map((function(e){return i?e.getVirtualStatus():e.getMinimizedStatus()}));return{type:t||i?Me.VIRTUAL:Me.NORMAL,groupKey:e,outlines:n.getOutlines(),items:r}}));var p=(t=this.getGroupItems()).indexOf(null==s?void 0:s.items[0]);t=t.indexOf(null==a?void 0:a.items.slice().reverse()[0]);return{cursors:[u,c],orgCursors:[i,r],itemCursors:[p,t],startGroupKey:null==s?void 0:s.groupKey,endGroupKey:null==a?void 0:a.groupKey,groups:e,outlines:this.outlines}},a.fitOutlines=function(e){void 0===e&&(e=this.useFit);var t,n,i=this.groups;i[0]&&(t=this.outlines.start,n=t.length?Math.min.apply(Math,t):0,!e&&0<n||(i.forEach((function(e){var t=(i=(e=e.grid).getOutlines()).start,i=i.end;e.setOutlines({start:t.map((function(e){return e-n})),end:i.map((function(e){return e-n}))})})),this.groupItems.forEach((function(e){var t=e.cssContentPos;Be(t)&&(e.cssContentPos=t-n)}))))},a.setGroupStatus=function(e){var t=this,n=(this.itemKeys={},this.groupItems=[],this.items=[],this.groupKeys),i=e.groups.map((function(e){var i=e.type,r=e.groupKey,o=e.items,s=(e=e.outlines,o=t._syncItemInfos(o),null!=(s=null==(s=n[r])?void 0:s.grid)?s:t._makeGrid());return s.setOutlines(e),s.setItems(o),{type:i,groupKey:r,grid:s,items:o,renderItems:o}}));this.setOutlines(e.outlines),this._registerGroups(i),this._updatePlaceholder(),this.setCursors(e.cursors[0],e.cursors[1])},a.appendPlaceholders=function(e,t){return this.insertPlaceholders("end",e,t)},a.prependPlaceholders=function(e,t){return this.insertPlaceholders("start",e,t)},a.removePlaceholders=function(e){var t,n,i=this.groups,r=i.length;"start"===e?(n=rt(i,(function(e){return e.type===Me.NORMAL})),i.splice(0,n)):"end"===e?(n=ot(i,(function(e){return e.type===Me.NORMAL})),i.splice(n+1,r-n-1)):(t=e.groupKey,-1<(n=rt(i,(function(e){return e.groupKey===t})))&&i.splice(n,1)),this.syncItems(at(this.getGroups()))},a.insertPlaceholders=function(e,t,i){void 0===i&&(i=et(this.groupKeys,"virtual_"));var r=[];Be(t)?r=function(e){for(var t=[],n=0;n<e;++n)t.push(n);return t}(t).map((function(){return{type:xe.VIRTUAL,groupKey:i}})):Array.isArray(t)&&(r=t.map((function(e){return n(n({groupKey:i},e),{type:xe.VIRTUAL})}))),t=this._makeGrid(),r=this._syncItemInfos(r,this.itemKeys),this._updatePlaceholder(r),t.setItems(r),t={type:Me.VIRTUAL,groupKey:i,grid:t,items:r,renderItems:r};return this.groupKeys[i]=t,"end"===e?(this.groups.push(t),(e=this.groupItems).push.apply(e,r)):(this.groups.splice(0,0,t),(e=this.groupItems).splice.apply(e,o([0,0],r,!1)),-1<this.startCursor&&(++this.startCursor,++this.endCursor)),{group:t,items:r}},a.shouldRerenderItems=function(){var e=!1;return this.getVisibleGroups().forEach((function(t){var n=t.items;n.length===t.renderItems.length||n.every((function(e){return e.mountState===X.UNCHECKED}))||(e=!0,t.renderItems=o([],n,!0))})),e&&(this.items=this._getRenderingItems()),e},a._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.groupItems)},a._getGroupItems=function(){return at(this.getGroups(!0))},a._getRenderingItems=function(){var e=He(this.getVisibleGroups(!0).map((function(e){return e.renderItems}))),t=this._loadingGrid,n=t.getLoadingItem();return n&&("end"===t.type?e.push(n):"start"===t.type&&e.unshift(n)),e},a._checkShouldRender=function(e){var t,n=this.options.gridConstructor,i=this.gridOptions,r=n.propertyTypes;for(t in i)if(!(t in e)&&r[t]===Z.RENDER_PROPERTY)return!0;for(t in e)if(i[t]!==e[t]&&r[t]===Z.RENDER_PROPERTY)return!0;return!1},a._applyVirtualGrid=function(e,t,n){var i=n.length?o([],n,!0):[0];n=e.getOutlines();return(e=n["end"===t?"start":"end"]).length!==i.length||e.some((function(e,t){return e!==i[t]}))?{start:o([],i,!0),end:o([],i,!0)}:n},a._syncItemInfos=function(e,t){void 0===t&&(t={});var i=this.options.horizontal,r=this.itemKeys;return e.filter((function(e){return null!=e.key})).forEach((function(e){var o=e.key,s=t[o];s?s.type===xe.VIRTUAL&&e.type!==xe.VIRTUAL?r[o]=new je(i,n({orgRect:s.orgRect,rect:s.rect},e)):(e.data&&(s.data=e.data),null!=e.groupKey&&(s.groupKey=e.groupKey),e.element&&(s.element=e.element),r[o]=s):r[o]=new je(i,n({},e))})),e.map((function(e){var o,s=e.key,a=(null==e.key&&(s=et(r,e.type===xe.VIRTUAL?"virtual_":"")),r[s]);return a||((o=t[s])?(a=o,e.data&&(a.data=e.data),e.element&&(a.element=e.element)):a=new je(i,n(n({},e),{key:s})),r[s]=a),a}))},a._registerGroups=function(e){var t={};e.forEach((function(e){t[e.groupKey]=e})),this.groups=e,this.groupKeys=t,this.groupItems=this._getGroupItems()},a._splitVirtualGroups=function(e,t){e=Je(this.groups,e,t);var n=this.itemKeys;return e.forEach((function(e){e.renderItems.forEach((function(e){n[e.key]=e}))})),e},a._mergeVirtualGroups=function(e){var t=this.itemKeys,n=this.groupKeys;return e.forEach((function(e){var i,r=n[e.groupKey];r&&(i=e.items).every((function(e){return e.mountState===X.UNCHECKED}))&&r.renderItems.forEach((function(e){e.type!==xe.VIRTUAL||t[e.key]||(i.push(e),t[e.key]=e)}))})),e},a._updatePlaceholder=function(e){void 0===e&&(e=this.groupItems);var t=this._placeholder;t&&e.filter((function(e){return e.type===xe.VIRTUAL})).forEach((function(e){var i,r=e,o=t;for(i in o){var s=o[i];r[i]="object"==typeof s?n(n({},r[i]),s):o[i]}}))},a._makeGrid=function(){var e=this.options.gridConstructor,t=this.gridOptions;return new e(this.containerElement,n(n({},t),{useFit:!1,autoResize:!1,useResizeObserver:!1,observeChildren:!1,renderOnPropertyChange:!1,externalContainerManager:this.containerManager,externalItemRenderer:this.itemRenderer}))},a._getLoadingGroup=function(){var e=this._loadingGrid,t=e.getItems();return{groupKey:"__INFINITEGRID__LOADING_GRID",type:Me.NORMAL,grid:e,items:t,renderItems:t}},a._getLoadingItem=function(){return this._loadingGrid.getLoadingItem()},s.defaultOptions=n(n({},ye.defaultOptions),{appliedItemChecker:function(){return!1},gridConstructor:null,gridOptions:{}}),s.propertyTypes=n(n({},ye.propertyTypes),{gridConstructor:Z.PROPERTY,gridOptions:Z.PROPERTY}),r([ue],s)}(ye),ft=function(e){function i(t){var i=e.call(this)||this;return i.startCursor=-1,i.endCursor=-1,i.size=0,i.items=[],i.itemKeys={},i.options=n({threshold:0,useRecycle:!0,defaultDirection:"end"},t),i}t(i,e);var r=i.prototype;return r.scroll=function(e){var t=this.startCursor,n=this.endCursor,i=this.items,r=i.length,o=this.size,s=(u=this.options).defaultDirection,a=u.threshold,u=u.useRecycle;s="end"===s;if(r)if(-1===t||-1===n)this.trigger("change",{prevStartCursor:t,prevEndCursor:n,nextStartCursor:h=s?0:r-1,nextEndCursor:h});else{var c=e+o,h=Math.max.apply(Math,i[t].startOutline),l=(o=Math.min.apply(Math,i[n].endOutline),i.map((function(t){var n=t.startOutline;t=t.endOutline;return!(!n.length||!t.length||st(n,t))&&(n=Math.min.apply(Math,n),t=Math.max.apply(Math,t),n-a<=c)&&e<=t+a}))),f=0<t,d=n<r-1,p=(h=e<=h+a,o=o-a<=c,l.indexOf(!0)),g=l.lastIndexOf(!0);if((l=(-1===p&&(p=t,g=n),u||(p=Math.min(p,t),g=Math.max(g,n)),p===t&&f&&h&&--p,g===n&&d&&o&&(g+=1),i.slice(p,g+1))).every((function(e){return!0===e.isVirtual}))){for(var m=!1,y=p-1;0<=y;--y)if(!i[y].isVirtual){p=y,m=!0;break}if(!m)for(y=g+1;y<r;++y)if(!i[y].isVirtual){g=y,m=!0;break}m&&(l=i.slice(p,g+1))}var R;u=l.some((function(e){return!0===e.isVirtual}));(t===p&&n===g||(this.trigger("change",{prevStartCursor:t,prevEndCursor:n,nextStartCursor:p,nextEndCursor:g}),u))&&(u?(d=null==(f=l[0])?void 0:f.isVirtual,f=null==(u=l[l.length-1])?void 0:u.isVirtual,s&&o||!d?!s&&h||!f||l[u=(R=ot(l,(function(e){return!e.isVirtual})))+1]&&this.trigger("requestAppend",{key:-1<R?l[R].key:void 0,nextKey:l[u].key,nextKeys:l.slice(u).map((function(e){return e.key})),isVirtual:!0}):l[d=(-1===(R=rt(l,(function(e){return!e.isVirtual})))?l.length:R)-1]&&this.trigger("requestPrepend",{key:-1<R?l[R].key:void 0,nextKey:l[d].key,nextKeys:l.slice(0,1+d).map((function(e){return e.key})),isVirtual:!0})):this._requestVirtualItems()||(s&&o||!h?!s&&h||!o||this.trigger("requestAppend",{key:i[n].key,isVirtual:!1}):this.trigger("requestPrepend",{key:i[t].key,isVirtual:!1})))}else this.trigger(s?"requestAppend":"requestPrepend",{key:void 0,isVirtual:!1})},r._requestVirtualItems=function(){var e="end"===this.options.defaultDirection,t=this.items,n=this.getVisibleItems(),i=n.filter((function(e){return!e.isVirtual})),r=n.length,o=i.length,s=this.getStartCursor(),a=this.getEndCursor();if(o!==r)if(o){var u=i[0].key,c=i[o-1].key;i=rt(t,(function(e){return e.key===u}))-1,o=rt(t,(function(e){return e.key===c}))+1,a=o<=a,s=s<=i;if((e||!s)&&a)return this.trigger("requestAppend",{key:c,nextKey:t[o].key,isVirtual:!0}),!0;if((!e||!a)&&s)return this.trigger("requestPrepend",{key:u,nextKey:t[i].key,isVirtual:!0}),!0}else if(r)return o=n[r-1],e?this.trigger("requestAppend",{nextKey:n[0].key,isVirtual:!0}):this.trigger("requestPrepend",{nextKey:o.key,isVirtual:!0}),!0;return!1},r.setCursors=function(e,t){this.startCursor=e,this.endCursor=t},r.setSize=function(e){this.size=e},r.getStartCursor=function(){return this.startCursor},r.getEndCursor=function(){return this.endCursor},r.isLoading=function(e){var t=this.startCursor,n=this.endCursor,i=(o=this.items)[t],r=o[n],o=o.length;return!(e===Ae.END&&-1<n&&n<o-1&&!r.isVirtual&&!st(r.startOutline,r.endOutline)||e===Ae.START&&0<t&&!i.isVirtual&&!st(i.startOutline,i.endOutline))},r.setItems=function(e){this.items=e;var t={};e.forEach((function(e){t[e.key]=e})),this.itemKeys=t},r.syncItems=function(e){var t,n=this.items,i=this.startCursor,r=this.endCursor,o=(t=Qe(this.items.map((function(e){return e.key})),e.map((function(e){return e.key})),i,r)).startCursor,s=(t=t.endCursor)-o!=r-i||-1===i||-1===o;return s||(s=0<(n=m(n.slice(i,r+1),e.slice(o,t+1),(function(e){return e.key}))).added.length||0<n.removed.length||0<n.changed.length),this.setItems(e),this.setCursors(o,t),s},r.getItems=function(){return this.items},r.getVisibleItems=function(){var e=this.startCursor,t=this.endCursor;return-1===e?[]:this.items.slice(e,t+1)},r.getSize=function(){return this.size},r.getItemByKey=function(e){return this.itemKeys[e]},r.getItemPartByKey=function(e){var t;return this.items.forEach((function(n){null!=(n=n.parts)&&n.forEach((function(n){n.key===e&&(t=n)}))})),t},r.getScrollSize=function(){var e=this.items,t=e.length;return t?Math.max.apply(Math,o([0],e[t-1].endOutline,!1)):0},r.getVisibleArea=function(e,t){t=(t=void 0===t?this.options.defaultDirection:t)===Ae.END;var n,i,r,o=this.getRenderedVisibleItems();return o.length?(n=o[t?0:length-1],i=t?Math.min.apply(Math,n.startOutline):Math.max.apply(Math,n.endOutline),t?o.forEach((function(t){null!=(t=t.parts)&&t.forEach((function(t){r&&r.pos>=t.pos||i<t.pos&&t.pos<=e&&(i=(r=t).pos)}))})):o.forEach((function(t){null!=(t=t.parts)&&t.forEach((function(t){var n=t.pos+t.size;r&&r.pos+r.size<=n||n<i&&e<=n&&(r=t,i=n)}))})),{item:n,part:r}):null},r.getRenderedVisibleItems=function(){var e=this.getVisibleItems(),t=e.map((function(e){var t=e.startOutline,n=e.endOutline;return 0!==(e=t.length)&&e===n.length&&t.some((function(e,t){return n[t]!==e}))})),n=t.indexOf(!0);return-1===(t=t.lastIndexOf(!0))?[]:e.slice(n,t+1)},r.destroy=function(){this.off(),this.startCursor=-1,this.endCursor=-1,this.items=[],this.size=0},i}(c),dt=(V=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.container=null,t.rendererKey=0,t._updateTimer=0,t._state={},t._isItemChanged=!1,t}t(i,e);var r=i.prototype;return r.updateKey=function(){this.rendererKey=Date.now()},r.getItems=function(){return this.items},r.setContainer=function(e){this.container=e},r.render=function(e,t){return this.syncItems(e,t)},r.update=function(e){var t=this;void 0===e&&(e={}),this._state=n(n({},this._state),e),this.trigger("update",{state:e}),clearTimeout(this._updateTimer),this._updateTimer=window.setTimeout((function(){t.trigger("requestUpdate",{state:e})}))},r.updated=function(e){void 0===e&&(e=null!=(r=null==(r=this.container)?void 0:r.children)?r:[]);var t=!!((r=this._diffResult).added.length||r.removed.length||r.changed.length),n=this._state,i=this._isItemChanged,r=r.list;return this._isItemChanged=!1,this._state={},(this.items=r).forEach((function(t,n){t.element=e[n]})),this.trigger("updated",{items:r,elements:it(e),diffResult:this._diffResult,state:n,isItemChanged:i,isChanged:t}),t},r.syncItems=function(e,t){void 0===t&&(t={});var i=this.rendererKey;e=m(this.items,e.map((function(e){return n(n({},e),{renderKey:"".concat(i,"_").concat(e.key)})})),(function(e){return e.renderKey}));return this._isItemChanged=!!e.added.length||!!e.removed.length||!!e.changed.length,this._state=n(n({},this._state),t),this._diffResult=e},r.destroy=function(){this.off()},i}(c),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.syncItems=function(t){var n=e.prototype.syncItems.call(this,t),i=n.added,r=n.list;return i.forEach((function(e){var n=t[e].orgItem;n.html&&!n.element&&(n.element=tt(n.html)[0]),r[e].element=n.element})),n},n}(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(t,n){var i=this.container,r=(t=e.prototype.render.call(this,t,n)).prevList,s=(n=t.removed,t.ordered),a=t.added,u=t.list,c=o([],r,!0);return n.forEach((function(e){c.splice(e,1),i.removeChild(r[e].element)})),s.forEach((function(e){var t=e[0];e=e[1],t=c.splice(t,1)[0];c.splice(e,0,t),i.insertBefore(t.element,null!=(e=null==(t=c[e+1])?void 0:t.element)?e:null)})),a.forEach((function(e){var t=u[e];c.splice(e,0,t),i.insertBefore(t.element,null!=(e=null==(t=c[e+1])?void 0:t.element)?e:null)})),this.updated(i.children),t},n}(V))),pt=function(e){function i(t,i){var r=e.call(this)||this;return r.wrapper=t,r.prevScrollPos=null,r.scrollOffset=0,r.contentSize=0,r._isScrollIssue=Le,r._onCheck=function(){var e=r.getScrollPos(),t=r.getOrgScrollPos();r.setScrollPos(t),null===e||r._isScrollIssue&&0===t||e===t?t&&(r._isScrollIssue=!1):(r._isScrollIssue=!1,r.trigger(new h("scroll",{direction:e<t?"end":"start",scrollPos:t,relativeScrollPos:r.getRelativeScrollPos()})))},r.options=n({container:!1,containerTag:"div",horizontal:!1,scrollContainer:null},i),r._init(),r}t(i,e);var r=i.prototype;return r.getWrapper=function(){return this.wrapper},r.getContainer=function(){return this.container},r.getScrollContainer=function(){return this.scrollContainer},r.getScrollOffset=function(){return this.scrollOffset},r.getContentSize=function(){return this.contentSize},r.getRelativeScrollPos=function(){return(this.prevScrollPos||0)-this.scrollOffset},r.getScrollPos=function(){return this.prevScrollPos},r.setScrollPos=function(e){this.prevScrollPos=e},r.getOrgScrollPos=function(){var e=this.eventTarget,t=this.options.horizontal,n="scroll".concat(t?"Left":"Top");return Ye(e)?window[t?"pageXOffset":"pageYOffset"]||document.documentElement[n]||document.body[n]:e[n]},r.setStatus=function(e){this.contentSize=e.contentSize,this.scrollOffset=e.scrollOffset,this.prevScrollPos=e.prevScrollPos,this.scrollTo(this.prevScrollPos)},r.getStatus=function(){return{contentSize:this.contentSize,scrollOffset:this.scrollOffset,prevScrollPos:this.prevScrollPos}},r.scrollTo=function(e){var t=this.eventTarget,n=(e=this.options.horizontal?[e,0]:[0,e])[0];e=e[1];Ye(t)?t.scroll(n,e):(t.scrollLeft=n,t.scrollTop=e)},r.scrollBy=function(e){var t,n,i;e&&(t=this.eventTarget,n=(i=this.options.horizontal?[e,0]:[0,e])[0],i=i[1],this.prevScrollPos+=e,Ye(t)?t.scrollBy(n,i):(t.scrollLeft+=n,t.scrollTop+=i))},r.resize=function(){var e=this.scrollContainer,t=this.options.horizontal,n=e===document.body,i=n?{top:0,left:0}:e.getBoundingClientRect(),r=this.container.getBoundingClientRect();this.scrollOffset=(this.getOrgScrollPos()||0)+(t?r.left-i.left:r.top-i.top),this.contentSize=n?t?window.innerWidth:window.innerHeight:t?e.offsetWidth:e.offsetHeight},r.destroy=function(){var e,t,n,i=this.container;this.eventTarget.removeEventListener("scroll",this._onCheck),this._isCreateElement?(e=this.scrollContainer,t=document.createDocumentFragment(),n=it(i.childNodes),e.removeChild(i),n.forEach((function(e){t.appendChild(e)})),e.appendChild(t)):this.options.container&&(i.style.cssText=this._orgCSSText)},r._init=function(){var e=(i=this.options).container,t=i.containerTag,n=i.horizontal,i=i.scrollContainer,r=s=this.wrapper,o=s,s="";(t=(e?(!0===e?((o=document.createElement(t)).style.position="relative",o.className=Ne,it(r.childNodes).forEach((function(e){o.appendChild(e)})),r.appendChild(o),this._isCreateElement=!0):o=qe(e),s=o.style.cssText,(t=r.style).overflowX=(e=n?["scroll","hidden"]:["hidden","scroll"])[0],t.overflowY=e[1],n&&(o.style.height="100%")):(r=qe(i)||document.body,s=o.style.cssText),r===document.body?window:r)).addEventListener("scroll",this._onCheck),this._orgCSSText=s,this.container=o,this.scrollContainer=r,this.eventTarget=t,this.resize(),this.setScrollPos(this.getOrgScrollPos())},i}(c),gt=function(e){function s(t,r){var o=e.call(this)||this,s=(r=(o._waitType="",o._onScroll=function(e){var t=e.direction,n=e.scrollPos;e=e.relativeScrollPos;o._scroll(),o.trigger(new h(Ke.CHANGE_SCROLL,{direction:t,scrollPos:n,relativeScrollPos:e}))},o._onChange=function(e){o.setCursors(e.nextStartCursor,e.nextEndCursor)},o._onRendererUpdated=function(e){var t,i,r,s,a,u,c;e.items.forEach((function(e){e.orgItem.element=e.element})),e.isChanged?(t=(a=e.diffResult).added,c=a.removed,i=a.prevList,r=a.list,c.forEach((function(e){(e=i[e].orgItem).mountState!==X.UNCHECKED&&(e.mountState=X.UNMOUNTED)})),s=o.options.horizontal,a=t.map((function(e){var t,i,o=(e=r[e].orgItem).element;return e.type===xe.VIRTUAL?(t=n({},e.cssRect),i=e.rect,!t.width&&i.width&&(t.width=i.width),!t.height&&i.height&&(t.height=i.height),new me(s,{element:o,cssRect:t})):e})),u=o.containerManager,o.options.observeChildren&&(u.unobserveChildren(c.map((function(e){return i[e].element}))),u.observeChildren(t.map((function(e){return r[e].element})))),u=(c=e.state).isRestore,c=c.isResize,o.itemRenderer.renderItems(a),u&&o._onRenderComplete({mounted:t.map((function(e){return r[e].orgItem})),updated:[],isResize:!1,direction:o.defaultDirection}),u&&!c&&!e.isItemChanged||o.groupManager.renderItems()):(o._checkEndLoading(),o._scroll())},o._onResize=function(e){e.isResizeContainer?o._renderItems({useResize:!0},!0):0<(e=te(o.getVisibleItems(),e.childEntries)).length&&o.updateItems(e)},o._onRequestAppend=function(e){o._onRequestInsert(Ae.END,Ke.REQUEST_APPEND,e)},o._onRequestPrepend=function(e){o._onRequestInsert(Ae.START,Ke.REQUEST_PREPEND,e)},o._onContentError=function(e){var t=e.element,n=e.target,i=e.item;e=e.update;o.trigger(new h(Ke.CONTENT_ERROR,{element:t,target:n,item:i,update:e,remove:function(){o.removeByKey(i.key)}}))},o._onRenderComplete=function(e){var t,n,i,r=e.isResize,s=e.mounted,a=e.updated,u=(e=e.direction,o.infinite),c=o.scrollManager.getRelativeScrollPos(),l=u.getScrollSize(),f=u.getSize(),d=u.getVisibleArea(c,e),p=e===Ae.END,g=(o._syncInfinite(),d&&(g=d.part,d=d.item,n=i=void 0,g&&(i=u.getItemPartByKey(g.key)),d&&(n=u.getItemByKey(d.key)),i||n)&&(m=0,t=i?(m=i.pos+(p?0:i.size),g.pos+(p?0:g.size)):(i=Math.min.apply(Math,d.startOutline),g=Math.max.apply(Math,d.endOutline),d=Math.min.apply(Math,n.startOutline),n=Math.max.apply(Math,n.endOutline),m=p?d:n,p?i:g),(d=m-t)<0&&(n=u.getScrollSize(),p=u.getSize(),i=Math.max(c-Math.max(0,l-f),0),d+=c-(Math.min(c,Math.max(0,n-p))+i)),o.scrollManager.scrollBy(d)),s.filter((function(e){return e.type!==xe.LOADING}))),m=(o.trigger(new h(Ke.RENDER_COMPLETE,{isResize:r,direction:e,mounted:g,updated:a.filter((function(e){return e.type!==xe.LOADING})),startCursor:o.getStartCursor(),endCursor:o.getEndCursor(),items:o.getVisibleItems(!0),groups:o.getVisibleGroups(!0)})),o.groupManager.shouldRerenderItems());(m=g.length||a.length?m||!!o.groupManager.endLoading():m)?o._update():(o._checkEndLoading(),o._scroll())},o.options=n(n(n({},o.constructor.defaultOptions),{renderer:(new dt).on("requestUpdate",(function(){return o._render()}))}),r),o.options),r.gridConstructor),a=r.containerTag,u=r.container,c=r.renderer,l=r.threshold,f=r.useRecycle,d=r.scrollContainer,p=r.appliedItemChecker,g=(r=i(r,["gridConstructor","containerTag","container","renderer","threshold","useRecycle","scrollContainer","appliedItemChecker"])).horizontal,m=r.attributePrefix,y=r.useTransform,R=r.percentage,v=r.isConstantSize,S=r.isEqualSize,z=r.autoResize,E=r.useResizeObserver,_=r.resizeDebounce,I=r.maxResizeDebounce,C=r.defaultDirection,O=r.useRoundedSize;t=We(t)?document.querySelector(t):t,u=(d=new pt(t,{scrollContainer:d,container:u,containerTag:a,horizontal:g}).on({scroll:o._onScroll})).getContainer(),a=new pe(u,{horizontal:g,autoResize:z,resizeDebounce:_,maxResizeDebounce:I,useResizeObserver:E}).on("resize",o._onResize),z=new ge({attributePrefix:m,horizontal:g,useTransform:y,percentage:R,isEqualSize:S,isConstantSize:v,useRoundedSize:O});return(I=((_=new ft({defaultDirection:C,useRecycle:f,threshold:l}).on({change:o._onChange,requestAppend:o._onRequestAppend,requestPrepend:o._onRequestPrepend})).setSize(d.getContentSize()),new lt(u,{appliedItemChecker:p,gridConstructor:s,externalItemRenderer:z,externalContainerManager:a,gridOptions:r}))).on({renderComplete:o._onRenderComplete,contentError:o._onContentError}),c.setContainer(u),c.on("updated",o._onRendererUpdated),o.itemRenderer=z,o.groupManager=I,o.wrapperElement=t,o.scrollManager=d,o.containerManager=a,o.infinite=_,o.containerManager.resize(),o}t(s,e);var a=s.prototype;return a.renderItems=function(e){return this._renderItems(e=void 0===e?{}:e),this},a.getWrapperElement=function(){return this.scrollManager.getWrapper()},a.getScrollContainerElement=function(){return this.scrollManager.getScrollContainer()},a.getContainerElement=function(){return this.scrollManager.getContainer()},a.syncItems=function(e){return this.groupManager.syncItems(e),this._syncGroups(),this},a.setCursors=function(e,t,n){return this.groupManager.setCursors(e,t),this.infinite.setCursors(e,t),n?(this.getVisibleItems().forEach((function(e){e.cssRect.top===Ue&&(e.cssRect={})})),this._syncItems()):(this._update(),this._checkEndLoading()),this},a.getStartCursor=function(){return this.infinite.getStartCursor()},a.getEndCursor=function(){return this.infinite.getEndCursor()},a.append=function(e,t){return this.insert(-1,e,t)},a.prepend=function(e,t){return this.insert(0,e,t)},a.insert=function(e,t,n){var i=this.groupManager.getGroupItems();t=nt(t,n);return-1===e?i.push.apply(i,t):i.splice.apply(i,o([e,0],t,!1)),this.syncItems(i)},a.insertByGroupIndex=function(e,t,n){var i,r;return(e=this.groupManager.getGroups()[e])?(i=this.groupManager.getGroupItems(),r=e.groupKey,e=rt(i,(function(e){return e.groupKey===r})),this.insert(e,t,n)):this.append(t,n)},a.getStatus=function(e,t){return{containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus(),groupManager:this.groupManager.getGroupStatus(e,t),scrollManager:this.scrollManager.getStatus()}},a.setPlaceholder=function(e){return this.groupManager.setPlaceholder(e),this},a.setLoading=function(e){return this.groupManager.setLoading(e),this},a.appendPlaceholders=function(e,t){var i=this,r=this.groupManager.appendPlaceholders(e,t);return this._syncGroups(!0),n(n({},r),{remove:function(){i.removePlaceholders({groupKey:r.group.groupKey})}})},a.prependPlaceholders=function(e,t){var i=this,r=this.groupManager.prependPlaceholders(e,t);return this._syncGroups(!0),n(n({},r),{remove:function(){i.removePlaceholders({groupKey:r.group.groupKey})}})},a.removePlaceholders=function(e){this.groupManager.removePlaceholders(e),this._syncGroups(!0)},a.setStatus=function(e,t){this.itemRenderer.setStatus(e.itemRenderer),this.containerManager.setStatus(e.containerManager),this.scrollManager.setStatus(e.scrollManager);var n=this.groupManager,i=this.containerManager.getInlineSize();n.setGroupStatus(e.groupManager),this._syncInfinite(),this.infinite.setCursors(n.getStartCursor(),n.getEndCursor()),this._getRenderer().updateKey(),e={isResize:this.containerManager.getInlineSize()!==i,isRestore:!0};return t?this._syncItems(e):this._update(e),this},a.removeGroupByIndex=function(e){var t=this.getGroups();return this.removeGroupByKey(t[e].groupKey)},a.removeGroupByKey=function(e){var t=this.getItems(),n=rt(t,(function(t){return t.groupKey===e})),i=ot(t,(function(t){return t.groupKey===e}));return-1===n?this:(t.splice(n,i-n+1),this.syncItems(t))},a.removeByIndex=function(e){var t=this.getItems(!0);return t.splice(e,1),this.syncItems(t)},a.removeByKey=function(e){var t=rt(this.getItems(!0),(function(t){return t.key===e}));return this.removeByIndex(t)},a.updateItems=function(e,t){return this.groupManager.updateItems(e,t=void 0===t?{}:t),this},a.getItems=function(e){return this.groupManager.getGroupItems(e)},a.getVisibleItems=function(e){return this.groupManager.getVisibleItems(e)},a.getRenderingItems=function(){return this.groupManager.getRenderingItems()},a.getGroups=function(e){return this.groupManager.getGroups(e)},a.getVisibleGroups=function(e){return this.groupManager.getVisibleGroups(e)},a.wait=function(e){this._waitType=e=void 0===e?Ae.END:e,this._checkStartLoading(e)},a.ready=function(e){this._waitType="",e&&(this.groupManager.waitEndLoading(),this.groupManager.endLoading())&&this._update()},a.isWait=function(){return!!this._waitType},a.destroy=function(){this.off(),this._getRenderer().destroy(),this.containerManager.destroy(),this.groupManager.destroy(),this.scrollManager.destroy(),this.infinite.destroy()},a._getRenderer=function(){return this.options.renderer},a._getRendererItems=function(){return this.getRenderingItems().map((function(e){return{element:e.element,key:"".concat(e.type,"_").concat(e.key),orgItem:e}}))},a._syncItems=function(e){this._getRenderer().syncItems(this._getRendererItems(),e)},a._render=function(e){this._getRenderer().render(this._getRendererItems(),e)},a._update=function(e){void 0===e&&(e={}),this._getRenderer().update(e)},a._resizeScroll=function(){var e=this.scrollManager;e.resize(),this.infinite.setSize(e.getContentSize())},a._syncGroups=function(e){var t=this.infinite;this.scrollManager.getContentSize()||this._resizeScroll(),this._syncInfinite(),this.groupManager.setCursors(t.getStartCursor(),t.getEndCursor()),e?this._update():this._render()},a._syncInfinite=function(){this.infinite.syncItems(this.getGroups(!0).map((function(e){var t=e.groupKey,n=e.grid,i=(e=e.type,n.getOutlines());return{key:t,isVirtual:e===Me.VIRTUAL,startOutline:i.start,endOutline:i.end,parts:n.getItems().map((function(e){return{key:e.key,pos:e.computedContentPos,size:e.computedContentSize}}))}})))},a._scroll=function(){this.infinite.scroll(this.scrollManager.getRelativeScrollPos())},a._onRequestInsert=function(e,t,n){var i=this;this._waitType?this._checkStartLoading(this._waitType):this.trigger(new h(t,{groupKey:n.key,nextGroupKey:n.nextKey,nextGroupKeys:n.nextKeys||[],isVirtual:n.isVirtual,wait:function(){i.wait(e)},ready:function(e){i.ready(e)}}))},a._renderItems=function(e,t){return void 0===e&&(e={}),!t&&e.useResize&&this.containerManager.resize(),this._resizeScroll(),this.getRenderingItems().length?this.getVisibleGroups(!0).length?this.groupManager.renderItems(e):this.setCursors(0,0):0<(t=it(this.getContainerElement().children)).length?(this.groupManager.syncItems(nt(t)),this._syncInfinite(),this.setCursors(0,0,!0),this._getRenderer().updated()):this.infinite.scroll(0),this},a._checkStartLoading=function(e){var t=this.groupManager,n=this.infinite;!t.getLoadingType()&&n.isLoading(e)&&t.startLoading(e)&&t.hasLoadingItem()&&this._update()},a._checkEndLoading=function(){var e=this.groupManager,t=this.groupManager.getLoadingType();!t||this._waitType&&this.infinite.isLoading(t)||!e.waitEndLoading()||!e.hasLoadingItem()||this._update()},s.defaultOptions=n(n({},J),{container:!1,containerTag:"div",renderer:null,threshold:100,useRecycle:!0,scrollContainer:null,appliedItemChecker:function(){return!1}}),s.propertyTypes=ke,r([$e],s)}(c),mt={__proto__:null,default:gt,withInfiniteGridMethods:function(e,t){ct.forEach((function(n){n in e||(e[n]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=(r=this[t])[n].apply(r,e);return r===this[t]?this:r})}))},getRenderingItems:function(e,t){var i,r,s,a,u=t.status,c=t.usePlaceholder,h=t.useLoading,l=t.horizontal,f=t.useFirstRender,d=[];return(t=t.grid)?(t.setPlaceholder(c?{}:null),t.setLoading(h?{}:null),t.syncItems(e),d=t.getRenderingItems()):u?(h=u.groupManager,t=e,u=!!c,r=!!l,s=Je(c=h.groups,"start",t=Xe(t)),a=Je(c,"end",t),s=o(o(o([],s,!0),t,!0),a,!0),a=(t=Qe(c.map((function(e){return e.groupKey})),s.map((function(e){return e.groupKey})),h.cursors[0],h.cursors[1])).startCursor,c=t.endCursor,h=He(s.slice(a,c+1).map((function(e){return e.items.map((function(e){return new je(r,n({},e))}))}))),d=h=u?h:h.filter((function(e){return e.type!==xe.VIRTUAL}))):f&&(i=!!l,d=(t=Xe(t=e))[0]?t[0].items.map((function(e){return new je(i,n({},e))})):[]),d},mountRenderingItems:function(e,t){var n=t.grid,i=t.usePlaceholder,r=t.useLoading,o=t.useFirstRender;t=t.status;n&&(i&&n.setPlaceholder({}),r&&n.setLoading({}),t&&n.setStatus(t,!0),n.syncItems(e),o)&&!t&&n.getGroups().length&&n.setCursors(0,0,!0)},InfiniteGridItem:je,MasonryInfiniteGrid:function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.propertyTypes=n(n({},gt.propertyTypes),ve.propertyTypes),i.defaultOptions=n(n(n({},gt.defaultOptions),ve.defaultOptions),{gridConstructor:ve,appliedItemChecker:function(e,t){return(parseFloat(e.attributes.column)||0)>=t.outlineLength}}),r([$e],i)}(gt),JustifiedInfiniteGrid:function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.propertyTypes=n(n({},gt.propertyTypes),_e.propertyTypes),i.defaultOptions=n(n(n({},gt.defaultOptions),_e.defaultOptions),{gridConstructor:_e}),r([$e],i)}(gt),FrameInfiniteGrid:function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.propertyTypes=n(n({},gt.propertyTypes),Pe.propertyTypes),i.defaultOptions=n(n(n({},gt.defaultOptions),Pe.defaultOptions),{gridConstructor:Pe}),r([$e],i)}(gt),PackingInfiniteGrid:function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.propertyTypes=n(n({},gt.propertyTypes),De.propertyTypes),i.defaultOptions=n(n(n({},gt.defaultOptions),De.defaultOptions),{gridConstructor:De}),r([$e],i)}(gt),Renderer:V,IS_IOS:Le,CONTAINER_CLASS_NAME:Ne,IGNORE_PROPERITES_MAP:Ge,INFINITEGRID_PROPERTY_TYPES:ke,DIRECTION:Ae,INFINITEGRID_EVENTS:Ke,ITEM_INFO_PROPERTIES:Ve,INFINITEGRID_METHODS:_,get GROUP_TYPE(){return Me},get ITEM_TYPE(){return xe},get STATUS_TYPE(){return we},INVISIBLE_POS:Ue};for(ht in mt)gt[ht]=mt[ht];return gt}));